add_namespace = madkirin
add_namespace = bacdebug
add_namespace = baccocc
#made by _unicornia. (github: rare-rit-y)
country_event = { 
	id = bacdebug.999 #hidden event for debuggo
	immediate = {log = "[GetDateText]: [Root.GetName]: event bacdebug.999"}
	hidden = yes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		TNO_BAC_Country_Closing_Screen_Show = yes
	}
}
country_event = { 
	id = bacdebug.1 #debug event for coal
	title = bacdebug.1.t
	desc = bacdebug.1.desc
	immediate = {log = "[GetDateText]: [Root.GetName]: event bacdebug.1"}
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = bacdebug.1.a
		set_temp_variable = { coalition_partner_var = token:communism }
		add_to_coalition = yes
	}
	option = {
		name = bacdebug.1.b
		set_temp_variable = { coalition_partner_var = token:fascism }
		add_to_coalition = yes
	}
	option = {
		name = bacdebug.1.c
		set_temp_variable = { coalition_partner_var = token:neutrality }
		add_to_coalition = yes
	}
	option = {
		name = bacdebug.1.d
		set_temp_variable = { coalition_partner_var = token:democratic }
		add_to_coalition = yes
	}
	option = {
		name = bacdebug.1.e
		end_coalition = yes
	}
}
country_event = { 
	id = bacdebug.2 #hidden event for debuggo
	immediate = {log = "[GetDateText]: [Root.GetName]: event bacdebug.2"}
	hidden = yes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		remove_country_leader_role = {
			character = "KIR_kindling_flash"
			ideology = primitive_communism
		}
		add_country_leader_role = {
			character = "KIR_kindling_flash"
			promote_leader = yes
			country_leader = {
				desc = "COC_kindling_flash_desc"
				ideology = BAC_COC_com
				expire = "1965.1.1.1"
				traits = { KIR_peasant_preacher }
			}
		}
		remove_country_leader_role = {
			character = "KIR_dayspring_rose"
			ideology = harmonic_theocracy
		}
		add_country_leader_role = {
			character = "KIR_dayspring_rose"
			promote_leader = yes
			country_leader = {
				desc = "COC_dayspring_rose_desc"
				ideology = BAC_COC_dem
				expire = "1965.1.1.1"
				traits = { KIR_tempered_flame }
			}
		}
		every_possible_country = {
			limit = {
				has_character = KIC_ember_glow
			}
			KIC_ember_glow = {
				set_nationality = PREV.PREV
			}
		}
		every_possible_country = {
			limit = {
				has_character = KIR_coral_river
			}
			KIR_coral_river = {
				set_nationality = PREV.PREV
			}
		}
		every_possible_country = {
			limit = {
				has_character = KIR_firethorn
			}
			KIR_firethorn = {
				remove_unit_leader_trait = old_guard
				add_unit_leader_trait = organisational_leader
				# set_portraits = { #this would be in her event for national defense commission
				# 	army = {
				# 		large = "GFX_portrait_KIR_firethorn_new_uniform"
				# 	}
				# }
				set_nationality = PREV.PREV
			}
		}
		# every_possible_country = {
		# 	limit = {
		# 		has_character = KIR_high_command_4 #Golden Lumen is fucking war criminal in kirin_republic.10
		# 	}
		# 	KIR_high_command_4 = {
		# 		set_nationality = PREV.PREV
		# 	}
		# }
		KIR = {
			KIR_ochre_glint = {
				set_nationality = PREV.PREV
			}
		}
		set_temp_variable = { coalition_partner_var = token:democratic }
		add_to_coalition = yes
	} #KIC_navy_chief_1 / KIR_navy_chief_1 () should be added when you complete the navy building focus
}
country_event = {  #hidden event for debuggo
	id = bacdebug.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event bacdebug.3"}
	hidden = yes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		load_focus_tree = BAC_COC_tree
		set_country_flag = COC_war_committee
	}
}





country_event = { # baccocc.1 - To Prepare The Foundation
	id = baccocc.1 
	title = baccocc.1.t
	desc = baccocc.1.d 
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.1"}
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_event_KIR_street
	option = { #"I have never thought this would be easy, after all."
		name = baccocc.1.a
		add_political_power = -3
		add_stability = -0.033
		add_war_support = -0.033
		set_power_balance = {
			id = BAC_commonalty_bop
		}
		set_country_flag = your_focus_fucked_up
		hidden_effect = {
			remove_country_leader_role = {
				character = "KIR_kindling_flash"
				ideology = BAC_COC_com
			}
			add_country_leader_role = {
				character = "KIR_kindling_flash"
				promote_leader = yes
				country_leader = {
					desc = "COC_kindling_flash_desc"
					ideology = primitive_communism
					expire = "1965.1.1.1"
					traits = { KIR_peasant_preacher }
				}
			}
			remove_country_leader_role = {
				character = "KIR_dayspring_rose"
				ideology = BAC_COC_dem
			}
			add_country_leader_role = {
				character = "KIR_dayspring_rose"
				promote_leader = yes
				country_leader = {
					desc = "COC_dayspring_rose_desc"
					ideology = harmonic_theocracy
					expire = "1965.1.1.1"
					traits = { KIR_tempered_flame }
				}
			}
			KIC_ember_glow = {
				unit_leader_event = {
					id = baccocc.2
					days = 3
					random_hours = 33
				}
			}
		}
	}
}

unit_leader_event = { # baccocc.2 - A Militarykirin in the Committee #위원회의 군마
	id = baccocc.2 
	title = baccocc.2.t
	desc = baccocc.2.d 
	picture = GFX_event_KIR_stamp_B
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.2"}
	is_triggered_only = yes
	fire_only_once = yes
	option = { #I cannot continue like this. #계속 이러고 있을 수는 없겠어.
		name = baccocc.2.a
		
		KIR_coral_river = {
			unit_leader_event = {
				id = baccocc.3
				days = 3
				random_hours = 33
			}
		}
	}
}

unit_leader_event = { # baccocc.3 - The Private Meeting # 회동
	id = baccocc.3 
	title = baccocc.3.t
	desc = baccocc.3.d 
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.3"}
	is_triggered_only = yes
	fire_only_once = yes
	option = {  #And? Firethorn's brows furrowed. # 그래서? 파이어쏜의 눈살이 찌푸려졌다. 
		name = baccocc.3.a
		
		country_event = {
			id = baccocc.4
			hours = 1
			random_hours = 2
		}
	}
}

country_event = { # baccocc.4 - To Achieve The Foundation #건국을 이루기 위하여
	id = baccocc.4 
	title = baccocc.4.t
	desc = baccocc.4.d 
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.4"}
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_event_KIR_festival
	option = { # And so, the night deepened for the two of them alone. #그렇게 둘만의 밤은 깊어져만 갔다.
		name = baccocc.4.a
		complete_national_focus = BAC_COC_m1
		add_to_variable = { coc_start_foci_completed = 1 }
		mark_focus_tree_layout_dirty = yes
	}
}
unit_leader_event = { # 파이어쏜
	id = baccocc.5 
	title = baccocc.5.t
	desc = baccocc.5.d 
	picture = GFX_event_KIR_eaves
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.5"}
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = baccocc.5.a # 
	}
}
country_event = { # baccocc.6 - Matter of Regional Autonomy
	id = baccocc.6 
	title = baccocc.6.t
	desc = baccocc.6.d 
	picture = GFX_event_KIR_festival
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.6"}
	is_triggered_only = yes
	fire_only_once = yes
	option = { # 일사천리로 해결되는 일이 있기는 하다는 게 다행이야.
		name = baccocc.6.a
		add_political_power = 33
		add_stability = 0.033
	}
}

unit_leader_event = { # baccocc.7 - Matter of Educational Model
	id = baccocc.7 
	title = baccocc.7.t
	desc = baccocc.7.d 
	picture = GFX_event_KIR_village
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.7"}
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = baccocc.7.a # communion
		bac_COT_small_effect = yes
		custom_effect_tooltip = baccocc_event_7a_tt
	}
	option = {
		name = baccocc.7.b # free
		bac_WPU_small_effect = yes
		custom_effect_tooltip = baccocc_event_7b_tt
	}
}
country_event = { # baccocc.8 - Which Law Should We Use?
	id = baccocc.8 
	title = baccocc.8.t
	desc = baccocc.8.d 
	picture = GFX_event_KIR_festival
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.8"}
	is_triggered_only = yes
	fire_only_once = yes
	option = { #이퀘스트리아 헌법을 이식하는 것이 최선의 방법이다. # 
		name = baccocc.8.a
		
	}
	option = { # All creatures should be equal before Concord. That's where we start. #kirin.20.c
		name = baccocc.8.b
		
	}
}
country_event = { # baccocc.12 - The Trial of NAKP
	id = baccocc.12 
	title = baccocc.12.t
	desc = baccocc.12.d 
	picture = GFX_event_KIR_stamp
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.12"}
	is_triggered_only = yes
	fire_only_once = yes
	option = { # Good riddance, after all.
		name = baccocc.12.a
		
	}
}
country_event = { #146 are you with me
	id = baccocc.146
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.146"}
	title = baccocc.146.t
	desc = baccocc.146.d
	picture = GFX_event_stg_pairlament
	is_triggered_only = yes
	option = { #ye
		name = baccocc.146.a
		FROM = { country_event = { days = 1 id = baccocc.148 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 33
				has_opinion = { target = FROM value > 33 }
				FROM = { has_war = no }
			}
		}
	}
	option = { #n
		name = baccocc.146.b
		FROM = { country_event = { days = 1 id = baccocc.147 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 33
				has_opinion = { target = FROM value < 33 }
			}
		}
	}
	option = { #yesmaar
		name = baccocc.146.c
		FROM = { country_event = { days = 1 id = baccocc.149 } }
		ai_chance = {
			factor = 1
			modifier = {
				add = 33
				has_opinion = { target = FROM value > 100 }
			}
			modifier = {
				add = 33
				FROM = { 
					has_war = no 
					has_army_manpower = {
						size > 3333333
					}
				}
			}
			modifier = {
				factor = 1.25
				FROM = { has_tech = tech_kirin_astrology }
			}
			modifier = {
				has_war = yes
				OR = {
					surrender_progress > 0.1
					enemies_strength_ratio > 0.6
				}
				add = 33
			}
			modifier = {
				has_war = yes
				OR = {
					surrender_progress > 0.3
					enemies_strength_ratio > 1
				}
				add = 333
			}
		}
	}
}
country_event = { #ject
	id = baccocc.147
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.147"}
	title = baccocc.147.t
	desc = baccocc.147.d
	picture = GFX_event_KIR_stamp_B
	is_triggered_only = yes
	option = { #oke
		name = baccocc.147.a
	}
	option = { #kill
		name = baccocc.147.b
		add_war_support = -0.1
		create_wargoal = {
			type = annex_everything
			target = FROM
		}
	}
}
country_event = { #yes
	id = baccocc.148
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.148"}
	title = baccocc.148.t
	desc = baccocc.148.d
	picture = GFX_event_KIR_stamp_B
	is_triggered_only = yes
	option = {
		name = baccocc.148.a
		if = {
			limit = { FROM = { is_faction_leader = yes } }
			every_country = {
				limit = {
					OR = {
						original_tag = FROM
						AND = {
							is_in_faction_with = FROM
							is_subject = no
						}
					}
				}

				ROOT = {add_to_faction = PREV}
				add_ai_strategy = {
					type = alliance
					id = ROOT
					value = 200
				}
				#set_country_flag = coc_alliance_member
			}
			FROM = {dismantle_faction = yes}
		}
		else = {
			ROOT = {add_to_faction = FROM}
			add_ai_strategy = {
				type = alliance
				id = ROOT
				value = 200
			}
		}
	}
}
country_event = { #149 yesmaar
	id = baccocc.149
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.149"}
	title = baccocc.149.t
	desc = baccocc.149.d
	picture = GFX_event_KIR_stamp_B
	is_triggered_only = yes
	option = {
		name = baccocc.149.a #reuse
		if = {
			limit = { FROM = { is_faction_leader = yes } }
			every_country = {
				limit = {
					OR = {
						original_tag = FROM
						AND = {
							is_in_faction_with = FROM
							is_subject = no
						}
					}
				}

				ROOT = { 
					set_autonomy = {
						target = PREV
						autonomous_state = autonomy_dominion
						end_wars = no
						end_civil_wars = no
					}
				}
			}
			FROM = {dismantle_faction = yes}
		}
		else = {
			ROOT = { 
				set_autonomy = {
					target = FROM
					autonomous_state = autonomy_dominion
					end_wars = no
					end_civil_wars = no
				}
			}
		}
	}
}
news_event = {
	id = baccocc.326
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.326"}
	title = baccocc.326.t
	desc = baccocc.326.d
	picture = GFX_news_event_palace_supreme_harmony

	major = no
	is_triggered_only = yes

	option = {
		name = baccocc.326.a
		if = {
			limit = {
				has_country_flag = KIC_children_of_concord_flag
			}
			# add_ideas = proper_science_base
			# add_ideas = no_lack_of_scientists
			# add_ideas = modern_society
			custom_effect_tooltip = KIR_line_break
			every_possible_country = {
				limit = {
					has_character = COC_common_senate
				}
				COC_common_senate = {
					set_nationality = PREV.PREV
				}
			}
			add_country_leader_role = {
				character = "COC_common_senate"
				promote_leader = yes
				country_leader = {
					desc = "COC_common_senate_desc"
					ideology = democratic_socialism
					expire = "1965.1.1.1"
					traits = { KIR_direct_democracy }
				}
			}
			set_cosmetic_tag = COC_commonalty
			custom_effect_tooltip = COC_kindling_add1_tt
			add_to_variable = { COC_power_struggle_KF_var = 1 }
			add_to_variable = { COC_power_struggle_KF_Progress_Bar_var = 1 }
			clamp_variable = { var = COC_power_struggle_KF_var min = 0 max = 7 }
			clamp_variable = { var = COC_power_struggle_KF_Progress_Bar_var min = 1 max = 8 }
		}
	}
}


country_event = { # madkirin.1 - The Lecture
	id = madkirin.1 
	title = madkirin.1.t
	desc = madkirin.1.d #박지원, 호질(虎叱)
	immediate = {log = "[GetDateText]: [Root.GetName]: event madkirin.1"}
	picture = GFX_event_KIR_stamp_B
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = madkirin.1.c #Her lecture is even more heretic.
		hidden_effect = {
			retire_ideology_leader = fascism
			add_country_leader_role = {
				character = KIR_fiery_azalea #placeholder, need to make a new OC
				promote_leader = yes
				country_leader = {
					expire = "1965.1.1"
					ideology = falangism
					traits = { }
				}
			}
		}
		set_temp_variable = { coalition_partner_var = token:fascism }
		add_to_coalition = yes
		add_popularity = {
			ideology = fascism
			popularity = 0.1
		}
	}
}