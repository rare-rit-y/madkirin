add_namespace = madkirin
add_namespace = bacdebug
add_namespace = baccocc
add_namespace = bacutility
#made by _unicornia. (github: rare-rit-y)
country_event = { 
	id = bacdebug.999 #hidden event for debuggo
	immediate = {log = "[GetDateText]: [Root.GetName]: event bacdebug.999"}
	hidden = yes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		TNO_BAC_Country_Closing_Screen_Show = yes
	}
}
country_event = { 
	id = bacdebug.1 #debug event for coal
	title = bacdebug.1.t
	desc = bacdebug.1.desc
	immediate = {log = "[GetDateText]: [Root.GetName]: event bacdebug.1"}
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = bacdebug.1.a
		set_temp_variable = { coalition_partner_var = token:communism }
		add_to_coalition = yes
	}
	option = {
		name = bacdebug.1.b
		set_temp_variable = { coalition_partner_var = token:fascism }
		add_to_coalition = yes
	}
	option = {
		name = bacdebug.1.c
		set_temp_variable = { coalition_partner_var = token:neutrality }
		add_to_coalition = yes
	}
	option = {
		name = bacdebug.1.d
		set_temp_variable = { coalition_partner_var = token:democratic }
		add_to_coalition = yes
	}
	option = {
		name = bacdebug.1.e
		end_coalition = yes
	}
}
country_event = { 
	id = bacdebug.2 #hidden event for debuggo
	immediate = {log = "[GetDateText]: [Root.GetName]: event bacdebug.2"}
	hidden = yes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		remove_country_leader_role = {
			character = "KIR_kindling_flash"
			ideology = primitive_communism
		}
		add_country_leader_role = {
			character = "KIR_kindling_flash"
			promote_leader = yes
			country_leader = {
				desc = "COC_kindling_flash_desc"
				ideology = BAC_COC_com
				expire = "1965.1.1.1"
				traits = { KIR_peasant_preacher }
			}
		}
		remove_country_leader_role = {
			character = "KIR_dayspring_rose"
			ideology = harmonic_theocracy
		}
		add_country_leader_role = {
			character = "KIR_dayspring_rose"
			promote_leader = yes
			country_leader = {
				desc = "COC_dayspring_rose_desc"
				ideology = BAC_COC_dem
				expire = "1965.1.1.1"
				traits = { KIR_tempered_flame }
			}
		}
		every_possible_country = {
			limit = {
				has_character = KIC_ember_glow
			}
			KIC_ember_glow = {
				set_nationality = PREV.PREV
			}
		}
		every_possible_country = {
			limit = {
				has_character = KIR_coral_river
			}
			KIR_coral_river = {
				set_nationality = PREV.PREV
			}
		}
		every_possible_country = {
			limit = {
				has_character = KIR_firethorn
			}
			KIR_firethorn = {
				remove_unit_leader_trait = old_guard
				add_unit_leader_trait = organisational_leader
				# set_portraits = { #this would be in her event for national defense commission
				# 	army = {
				# 		large = "GFX_portrait_KIR_firethorn_new_uniform"
				# 	}
				# }
				set_nationality = PREV.PREV
			}
		}
		# every_possible_country = {
		# 	limit = {
		# 		has_character = KIR_high_command_4 #Golden Lumen is fucking war criminal in kirin_republic.10
		# 	}
		# 	KIR_high_command_4 = {
		# 		set_nationality = PREV.PREV
		# 	}
		# }
		KIR = {
			KIR_ochre_glint = {
				set_nationality = PREV.PREV
			}
		}
		set_temp_variable = { coalition_partner_var = token:democratic }
		add_to_coalition = yes
	} #KIC_navy_chief_1 / KIR_navy_chief_1 () should be added when you complete the navy building focus
}
country_event = {  #hidden event for debuggo
	id = bacdebug.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event bacdebug.3"}
	hidden = yes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		load_focus_tree = BAC_COC_tree
		set_country_flag = COC_war_committee
	}
}





country_event = { # baccocc.1 - To Prepare The Foundation
	id = baccocc.1 
	title = baccocc.1.t
	desc = baccocc.1.d 
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.1"}
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_event_KIR_street
	option = { #"I have never thought this would be easy, after all."
		name = baccocc.1.a
		add_ideas = KIC_CFP
		custom_effect_tooltip = baccocc_1_tt
		set_power_balance = {
			id = BAC_commonalty_bop
		}
		set_country_flag = your_focus_fucked_up_bac_flag
		hidden_effect = {
			remove_country_leader_role = {
				character = "KIR_kindling_flash"
				ideology = BAC_COC_com
			}
			add_country_leader_role = {
				character = "KIR_kindling_flash"
				promote_leader = yes
				country_leader = {
					desc = "COC_kindling_flash_desc"
					ideology = primitive_communism
					expire = "1965.1.1.1"
					traits = { KIR_peasant_preacher }
				}
			}
			remove_country_leader_role = {
				character = "KIR_dayspring_rose"
				ideology = BAC_COC_dem
			}
			add_country_leader_role = {
				character = "KIR_dayspring_rose"
				promote_leader = yes
				country_leader = {
					desc = "COC_dayspring_rose_desc"
					ideology = harmonic_theocracy
					expire = "1965.1.1.1"
					traits = { KIR_tempered_flame }
				}
			}
			KIC_ember_glow = {
				unit_leader_event = {
					id = baccocc.2
					days = 3
					random_hours = 33
				}
			}
		}
	}
}

unit_leader_event = { # baccocc.2 - A Militarykirin in the Committee
	id = baccocc.2 
	title = baccocc.2.t
	desc = baccocc.2.d 
	picture = GFX_event_KIR_stamp_B
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.2"}
	is_triggered_only = yes
	fire_only_once = yes
	option = { #I cannot continue like this. #계속 이러고 있을 수는 없겠어.
		name = baccocc.2.a
		THIS = { add_unit_leader_trait = trait_SOV_determined }
		KIR_coral_river = {
			unit_leader_event = {
				id = baccocc.3
				days = 3
				random_hours = 33
			}
		}
	}
}

unit_leader_event = { # baccocc.3 - The Private Meeting
	id = baccocc.3 
	title = baccocc.3.t
	desc = baccocc.3.d 
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.3"}
	is_triggered_only = yes
	fire_only_once = yes
	option = {  #And? Firethorn's brows furrowed. # 그래서? 파이어쏜의 눈살이 찌푸려졌다. 
		name = baccocc.3.a
		
		country_event = {
			id = baccocc.4
			hours = 1
			random_hours = 2
		}
	}
}

country_event = { # baccocc.4 - To Achieve The Foundation
	id = baccocc.4
	title = baccocc.4.t
	desc = baccocc.4.d
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.4"}
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_event_KIR_festival
	option = { # And so, the night deepened for the two of them alone.
		name = baccocc.4.a
		KIR_coral_river = { add_unit_leader_trait = trait_SOV_determined }
		clr_country_flag = your_focus_fucked_up_bac_flag
		complete_national_focus = BAC_COC_m1
		add_to_variable = { coc_start_foci_completed = 1 }
		mark_focus_tree_layout_dirty = yes
	}
}
country_event = { # baccocc.5 - Which Law Should We Use?
	id = baccocc.5
	title = baccocc.5.t
	desc = baccocc.5.d 
	picture = GFX_event_KIR_festival
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.5"}
	is_triggered_only = yes
	fire_only_once = yes
	option = { #이퀘스트리아 헌법을 이식하는 것이 최선의 방법이다. # 
		name = baccocc.5.a
		
	}
	option = { # All creatures should be equal before Concord. That's where we start. #kirin.20.c
		name = baccocc.5.b
		
	}
}
country_event = { # baccocc.6 - Matter of Regional Autonomy
	id = baccocc.6 
	title = baccocc.6.t
	desc = baccocc.6.d 
	picture = GFX_event_KIR_festival
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.6"}
	is_triggered_only = yes
	fire_only_once = yes
	option = { # It's really nice to know that some things just work out.
		name = baccocc.6.a
		add_political_power = 33
		add_stability = 0.033
	}
}
country_event = { #Matter of Empowerment Action
	id = baccocc.7
	title = baccocc.7.t
	desc = baccocc.7.d 
	picture = GFX_event_KIR_stamp_A
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.7"}
	is_triggered_only = yes
	fire_only_once = yes
	option = { # Tearful persuasion eventually had an effect!
		name = baccocc.7.a
		add_popularity = {
			ideology = communism
			popularity = -0.033
		}
		add_stability = -0.033
		add_political_power = -33
	}
	option = { # Perhaps it would be better just to step back...
		name = baccocc.7.b
		custom_effect_tooltip = BAC_start_phase_2_tt
		effect_tooltip = {
			swap_ideas = {
				remove_idea = BAC_regional_self_centeredness_dummy_0
				add_idea = BAC_regional_self_centeredness_dummy_1
			}
		}
		set_country_flag = baccocc_7b_flag
	}
}

unit_leader_event = { # baccocc.10 - Matter of Educational Model
	id = baccocc.10 
	title = baccocc.10.t
	desc = baccocc.10.d 
	picture = GFX_event_KIR_village
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.10"}
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = baccocc.10.a # communion
		bac_COT_small_effect = yes
		custom_effect_tooltip = baccocc_10a_tt
	}
	option = {
		name = baccocc.10.b # free
		bac_WPU_small_effect = yes
		custom_effect_tooltip = baccocc_10b_tt
	}
}
country_event = { # baccocc.11 - The Trial of NAKP
	id = baccocc.11
	title = baccocc.11.t
	desc = baccocc.11.d 
	picture = GFX_event_KIR_stamp
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.11"}
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = baccocc.11.a
		add_political_power = 33
		add_stability = 0.033
		every_possible_country = {
			limit = { original_tag = KIS }
			effect_tooltip = { kill_country_leader = yes }
			every_character = {
				limit = { is_country_leader = no }
				retire = yes
			}
			hidden_effect = { kill_country_leader = yes }
		}
		effect_tooltip = {
			add_manpower = -69 
		}
	}
}
unit_leader_event = { #baccocc.12 firethorn
	id = baccocc.12
	title = kirin.112.t
	desc = baccocc.12.d 
	picture = GFX_event_KIR_eaves
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.12"}
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = baccocc.12.a # 
		THIS = {
			promote_leader = yes
			#add_unit_leader_trait = organisational_leader
			set_portraits = {
				army = {
					large = "GFX_portrait_KIR_firethorn_new_uniform"
				}
			}
			add_unit_leader_trait = trait_SOV_determined
		}
		complete_national_focus = BAC_COC_mil_head
	}
}
country_event = {
	id = baccocc.36
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.36"}
	title = baccocc.36.t
	desc = baccocc.36.d

	picture = GFX_event_KIR_city

	trigger = {
		has_country_flag = KIC_children_of_concord_flag
		original_tag = KIC
		has_railway_connection = {
			start_province = 20626
			target_province = 16648
		}
	}
	fire_only_once = yes
	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = kirin.36.a
		add_political_power = 33
		add_popularity = {
			ideology = communism
			popularity = 0.033
		}
	}
}

country_event = { #146 are you with me
	id = baccocc.146
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.146"}
	title = baccocc.146.t
	desc = baccocc.146.d
	picture = GFX_event_stg_pairlament
	is_triggered_only = yes
	option = { #ye
		name = baccocc.146.a
		FROM = { country_event = { days = 1 id = baccocc.148 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 33
				has_opinion = { target = FROM value > 33 }
				FROM = { has_war = no }
			}
		}
	}
	option = { #n
		name = baccocc.146.b
		FROM = { country_event = { days = 1 id = baccocc.147 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 33
				has_opinion = { target = FROM value < 33 }
			}
		}
	}
	option = { #yesmaar
		name = baccocc.146.c
		FROM = { country_event = { days = 1 id = baccocc.149 } }
		ai_chance = {
			factor = 1
			modifier = {
				add = 33
				has_opinion = { target = FROM value > 100 }
			}
			modifier = {
				add = 33
				FROM = { 
					has_war = no 
					has_army_manpower = {
						size > 3333333
					}
				}
			}
			modifier = {
				factor = 1.25
				FROM = { has_tech = tech_kirin_astrology }
			}
			modifier = {
				has_war = yes
				OR = {
					surrender_progress > 0.1
					enemies_strength_ratio > 0.6
				}
				add = 33
			}
			modifier = {
				has_war = yes
				OR = {
					surrender_progress > 0.3
					enemies_strength_ratio > 1
				}
				add = 333
			}
		}
	}
}
country_event = { #ject
	id = baccocc.147
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.147"}
	title = baccocc.147.t
	desc = baccocc.147.d
	picture = GFX_event_KIR_stamp_B
	is_triggered_only = yes
	option = { #oke
		name = baccocc.147.a
	}
	option = { #kill
		name = baccocc.147.b
		add_war_support = -0.1
		create_wargoal = {
			type = annex_everything
			target = FROM
		}
	}
}
country_event = { #yes
	id = baccocc.148
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.148"}
	title = baccocc.148.t
	desc = baccocc.148.d
	picture = GFX_event_KIR_stamp_B
	is_triggered_only = yes
	option = {
		name = baccocc.148.a
		if = {
			limit = { FROM = { is_faction_leader = yes } }
			every_country = {
				limit = {
					OR = {
						original_tag = FROM
						AND = {
							is_in_faction_with = FROM
							is_subject = no
						}
					}
				}

				ROOT = {add_to_faction = PREV}
				add_ai_strategy = {
					type = alliance
					id = ROOT
					value = 200
				}
				#set_country_flag = coc_alliance_member
			}
			FROM = {dismantle_faction = yes}
		}
		else = {
			ROOT = {add_to_faction = FROM}
			add_ai_strategy = {
				type = alliance
				id = ROOT
				value = 200
			}
		}
	}
}
country_event = { #149 yesmaar
	id = baccocc.149
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.149"}
	title = baccocc.149.t
	desc = baccocc.149.d
	picture = GFX_event_KIR_stamp_B
	is_triggered_only = yes
	option = {
		name = baccocc.149.a #reuse
		if = {
			limit = { FROM = { is_faction_leader = yes } }
			every_country = {
				limit = {
					OR = {
						original_tag = FROM
						AND = {
							is_in_faction_with = FROM
							is_subject = no
						}
					}
				}

				ROOT = { 
					set_autonomy = {
						target = PREV
						autonomous_state = autonomy_dominion
						end_wars = no
						end_civil_wars = no
					}
				}
			}
			FROM = {dismantle_faction = yes}
		}
		else = {
			ROOT = { 
				set_autonomy = {
					target = FROM
					autonomous_state = autonomy_dominion
					end_wars = no
					end_civil_wars = no
				}
			}
		}
	}
}
country_event = { # baccocc.303 - Tathya-Samvrti
	id = baccocc.303
	title = baccocc.303.t
	desc = baccocc.303.d
	picture = GFX_event_KIR_evening
	immediate = {log = "[GetDateText]: [Root.GetName]: event baccocc.303"}
	is_triggered_only = yes
	fire_only_once = yes
	option = { # too long to be addressed here
		name = baccocc.303.a
		custom_effect_tooltip = baccocc_303_tt
		TNO_BAC_Country_Closing_Screen_Show = yes
		set_country_flag = commonalty_ending_flag
	}
}


country_event = { # madkirin.1 - The Lecture
	id = madkirin.1 
	title = madkirin.1.t
	desc = madkirin.1.d #박지원, 호질(虎叱)
	immediate = {log = "[GetDateText]: [Root.GetName]: event madkirin.1"}
	picture = GFX_event_KIR_stamp_B
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = madkirin.1.c #Her lecture is even more heretic.
		hidden_effect = {
			retire_ideology_leader = fascism
			add_country_leader_role = {
				character = KIR_fiery_azalea #placeholder, need to make a new OC
				promote_leader = yes
				country_leader = {
					expire = "1965.1.1"
					ideology = falangism
					traits = { }
				}
			}
		}
		set_temp_variable = { coalition_partner_var = token:fascism }
		add_to_coalition = yes
		add_popularity = {
			ideology = fascism
			popularity = 0.1
		}
	}
}