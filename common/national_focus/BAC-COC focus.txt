
#!gfx:interface\madk_pic.gfx
focus_tree = {
	id = BAC_COC_tree
	country = {
		factor = 0
		modifier = {
			add = 50
			has_country_flag = KIC_children_of_concord_flag
		}
	}
	default = no

	continuous_focus_position = { x = 3000 y = 20 }
	shared_focus = BAC_COC_pretender
	shared_focus = BAC_COC_kindling
	shared_focus = BAC_COC_dayspring

	shared_focus = BAC_COC_c1 #BAC Commonalty focuses
	shared_focus = BAC_COC_c2
	shared_focus = BAC_COC_c3
	shared_focus = BAC_COC_h1
	shared_focus = BAC_COC_h2
	shared_focus = BAC_COC_h3
	shared_focus = BAC_COC_m1
	shared_focus = BAC_COC_m2
	shared_focus = BAC_COC_m3
	shared_focus = BAC_COC_pol_head
	shared_focus = BAC_COC_sekrit_war_committee
	initial_show_position = {
		x = 11
		y = 0
		offset = {
			x = 0
			y = 8
			trigger = {
				has_completed_focus = BAC_COC_finale
			}
		}
		offset = {
			x = 0
			y = 4
			trigger = {
				has_completed_focus = BAC_COC_true_commonalty
			}
		}
		offset = {
			x = 0
			y = 6
			trigger = {
				has_country_flag = COC_war_committee_flag
			}
		}
	}
}

shared_focus = {
	id = BAC_COC_kindling
	icon = GFX_goal_KIR_communism
	x = 11
	y = 0

	cost = 1.3

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus COC_kindling"
		country_event = { id = kirin_council.305 hours = 1 }
		add_political_power = 150
		subtract_from_variable = { COC_9_var = 0.05 }
		custom_effect_tooltip = KIR_line_break
		effect_tooltip = {
			swap_ideas = { add_idea = COC_peasant_army_dummy1 remove_idea = COC_peasant_army_dummy }
		}
		custom_effect_tooltip = COC_kindling_tt
		hidden_effect = {
			division_template = {
				name = "Red Guards"
				division_names_group = KIR_BANNER
				template_counter = 0
				regiments = {
					kirin_vanguards = { x = 0 y = 0 }
					kirin_vanguards = { x = 0 y = 1 }
					kirin_vanguards = { x = 1 y = 0 }
					kirin_vanguards = { x = 1 y = 1 }
					kirin_vanguards = { x = 2 y = 0 }
					kirin_vanguards = { x = 2 y = 1 }
					artillery_brigade = { x = 3 y = 0 }
					artillery_brigade = { x = 3 y = 1 }
				}
				support = {
					engineer = { x = 0 y = 0 }
				}
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"No. 800 Red Guards Division\" division_template = \"Red Guards\" start_equipment_factor = 0.9 start_experience_factor = 0.3" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"No. 500 Red Guards Division\" division_template = \"Red Guards\" start_equipment_factor = 0.9 start_experience_factor = 0.25" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"No. 200 Red Guards Division\" division_template = \"Red Guards\" start_equipment_factor = 0.9 start_experience_factor = 0.25" owner = PREV allow_spawning_on_enemy_provs = no }
			}
		}
	}
}

shared_focus = {
	id = BAC_COC_kindling_1a
	icon = GFX_goal_KIR_KIC_battle_flag
	relative_position_id = BAC_COC_kindling
	x = -1
	y = 1

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_kindling
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus COC_kindling_1a"
		custom_effect_tooltip = COC_kindling_add1_tt
		add_to_variable = { COC_power_struggle_KF_var = 1 }
		add_to_variable = { COC_power_struggle_KF_Progress_Bar_var = 1 }
		clamp_variable = { var = COC_power_struggle_KF_var min = 0 max = 7 }
		clamp_variable = { var = COC_power_struggle_KF_Progress_Bar_var min = 1 max = 8 }
		1067 = {
			remove_core_of = KIS
			add_core_of = ROOT
			start_resistance = yes
			custom_effect_tooltip = KIR_line_break
			add_resistance_target = {
				id = 1067
				amount = 50
				occupier = KIS
				#occupied = ROOT
				days = 365
				tooltip = COC_uprising_tt
			}
		}
	}
}

shared_focus = {
	id = BAC_COC_kindling_2
	icon = GFX_goal_KIR_pointing
	relative_position_id = BAC_COC_kindling
	x = 0
	y = 2

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_kindling_1a
		focus = BAC_COC_pretender_1a
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus COC_kindling_2"
		custom_effect_tooltip = COC_kindling_2_tt
		effect_tooltip = {
			add_dynamic_modifier = { modifier = COC_provincal_peoples_militia scope = COC }
		}
		set_country_flag = COC_provincal_peoples_militia_flag
	}
}

shared_focus = {
	id = BAC_COC_kindling_X
	icon = GFX_goal_KIR_unity
	relative_position_id = BAC_COC_kindling_2
	x = -1
	y = 1

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_kindling_2
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus COC_kindling_X"
		custom_effect_tooltip = COC_kindling_add1_tt
		add_to_variable = { COC_power_struggle_KF_var = 1 }
		add_to_variable = { COC_power_struggle_KF_Progress_Bar_var = 1 }
		clamp_variable = { var = COC_power_struggle_KF_var min = 0 max = 7 }
		clamp_variable = { var = COC_power_struggle_KF_Progress_Bar_var min = 1 max = 8 }
		country_event = { id = kirin_council.315 hours = 1 }
		every_state = {
			limit = {
				OR = {
					region = 31
					state = 926
				}
			}
			add_core_of = COC
		}
		hidden_effect = {
			every_core_state = {
				remove_claim_by = ROOT
			}
		}
	}
}

shared_focus = {
	id = BAC_COC_kindling_3
	icon = GFX_goal_KIR_rearing
	relative_position_id = BAC_COC_kindling
	x = 0
	y = 4

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_kindling_X
		focus = BAC_COC_pretender_2a
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus COC_kindling_3"
		country_event = { id = kirin_council.316 hours = 1 }
		effect_tooltip = {
			swap_ideas = { add_idea = COC_peasant_army_dummy2 remove_idea = COC_peasant_army_dummy }
		}
		hidden_effect = {
			add_to_variable = { COC_26_var = 0.1 }
		}
		add_equipment_to_stockpile = { type = infantry_equipment amount = 5000 }
		add_equipment_to_stockpile = { type = support_equipment amount = 1000 }
	}
}

shared_focus = {
	id = BAC_COC_kindling_4a
	icon = GFX_goal_KIR_partisan
	relative_position_id = BAC_COC_kindling_3
	x = -1
	y = 1

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_kindling_3
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus COC_kindling_4a"
		country_event = { id = kirin_council.318 hours = 1 }
		custom_effect_tooltip = COC_kindling_4a_tt
		set_country_flag = COC_guerilla_strike_flag
		set_variable = { GuerillaOrgDmgVar = 90 }
		set_variable = { GuerillaStrDmgVar = 150 }
	}
}

shared_focus = {
	id = BAC_COC_kindling_4b
	icon = GFX_goal_KIR_angery
	relative_position_id = BAC_COC_kindling_3
	x = 2
	y = 1

	cost = 7.2

	prerequisite = {
		focus = BAC_COC_kindling_3
	}

	mutually_exclusive = {
		focus = BAC_COC_dayspring_4a
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus COC_kindling_4b"
		country_event = { id = kirin_council.313 hours = 1 }
		custom_effect_tooltip = COC_kindling_add1_tt
		add_to_variable = { COC_power_struggle_KF_var = 1 }
		add_to_variable = { COC_power_struggle_KF_Progress_Bar_var = 1 }
		clamp_variable = { var = COC_power_struggle_KF_var min = 0 max = 7 }
		clamp_variable = { var = COC_power_struggle_KF_Progress_Bar_var min = 1 max = 8 }
		subtract_from_variable = { COC_18_var = 0.05 }
		custom_effect_tooltip = KIR_line_break
		effect_tooltip = {
			swap_ideas = { add_idea = COC_peasant_army_dummy3 remove_idea = COC_peasant_army_dummy }
		}
		random_controlled_state = {
			prioritize = { 1069 1076 1073 1077 }
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		random_controlled_state = {
			prioritize = { 1069 1076 1073 1077 }
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		random_controlled_state = {
			prioritize = { 1069 1076 1073 1077 }
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
}

shared_focus = {
	id = BAC_COC_pretender
	icon = GFX_goal_KIR_kirin_head_unique
	x = 15
	y = 0

	cost = 1.3

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus BAC_COC_pretender"
		country_event = { id = kirin_council.306 hours = 1 }
		add_command_power = 50
		add_to_variable = { COC_11_var = 0.05 }
		custom_effect_tooltip = KIR_line_break
		effect_tooltip = {
			swap_ideas = { add_idea = COC_desperate_revolt_dummy2 remove_idea = COC_desperate_revolt_dummy }
		}
	}
}

shared_focus = {
	id = BAC_COC_pretender_1a
	icon = GFX_goal_KIR_tristar
	relative_position_id = BAC_COC_pretender
	x = -2
	y = 1

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_pretender
		focus = BAC_COC_kindling
	}

	mutually_exclusive = {
		focus = BAC_COC_pretender_1b
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus BAC_COC_pretender_1a"
		custom_effect_tooltip = COC_kindling_add1_tt
		add_to_variable = { COC_power_struggle_KF_var = 1 }
		add_to_variable = { COC_power_struggle_KF_Progress_Bar_var = 1 }
		clamp_variable = { var = COC_power_struggle_KF_var min = 0 max = 7 }
		clamp_variable = { var = COC_power_struggle_KF_Progress_Bar_var min = 1 max = 8 }
		country_event = { id = kirin_council.307 hours = 1 }
		add_to_variable = { COC_22_var = 0.1 }
		add_to_variable = { COC_23_var = 20 }
		custom_effect_tooltip = KIR_line_break
		effect_tooltip = {
			swap_ideas = { add_idea = COC_pretender_mahogany_blaze_dummy1 remove_idea = COC_pretender_mahogany_blaze_dummy }
		}
	}
}

shared_focus = {
	id = BAC_COC_pretender_X
	icon = GFX_goal_KIR_militiamare
	relative_position_id = BAC_COC_pretender_1a
	x = 1
	y = 1

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_pretender_1a
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus BAC_COC_pretender_X"
		custom_effect_tooltip = COC_kindling_add1_tt
		add_to_variable = { COC_power_struggle_KF_var = 1 }
		add_to_variable = { COC_power_struggle_KF_Progress_Bar_var = 1 }
		clamp_variable = { var = COC_power_struggle_KF_var min = 0 max = 7 }
		clamp_variable = { var = COC_power_struggle_KF_Progress_Bar_var min = 1 max = 8 }
		custom_effect_tooltip = COC_pretender_X_tt
		hidden_effect = {
			division_template = {
				name = "Workers' Militia"
				division_names_group = KIR_BANNER
				template_counter = 69
				regiments = {
					militia = { x = 0 y = 0 }
					militia = { x = 0 y = 1 }
					militia = { x = 0 y = 2 }
					militia = { x = 1 y = 0 }
					militia = { x = 1 y = 1 }
					militia = { x = 1 y = 2 }
					militia = { x = 2 y = 0 }
					artillery_brigade = { x = 3 y = 0 }
					artillery_brigade = { x = 3 y = 1 }
				}
				support = {
				}
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"First Workers' Guard Division 'Destiny'\" division_template = \"Workers' Militia\" start_equipment_factor = 0.99 start_experience_factor = 0.3" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"Second Workers' Guard Division 'Justice'\" division_template = \"Workers' Militia\" start_equipment_factor = 0.96 start_experience_factor = 0.25" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"Third Workers' Guard Division 'Freedom'\" division_template = \"Workers' Militia\" start_equipment_factor = 0.93 start_experience_factor = 0.25" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"Fourth Workers' Guard Division 'Democracy'\" division_template = \"Workers' Militia\" start_equipment_factor = 0.90 start_experience_factor = 0.25" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"Fifth Workers' Guard Division 'Dignity'\" division_template = \"Workers' Militia\" start_equipment_factor = 0.87 start_experience_factor = 0.25" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			set_division_template_lock = {
				division_template = "Peasant Militia"
				is_locked = no
			}
		}
	}
}

shared_focus = {
	id = BAC_COC_pretender_1b
	icon = GFX_goal_KIR_onwards
	relative_position_id = BAC_COC_pretender
	x = 2
	y = 1

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_pretender
		focus = BAC_COC_dayspring
	}

	mutually_exclusive = {
		focus = BAC_COC_pretender_1a
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus BAC_COC_pretender_1b"
		custom_effect_tooltip = COC_dayspring_add1_tt
		add_to_variable = { COC_power_struggle_DR_var = 1 }
		add_to_variable = { COC_power_struggle_DR_Progress_Bar_var = 1 }
		clamp_variable = { var = COC_power_struggle_DR_var min = 0 max = 7 }
		clamp_variable = { var = COC_power_struggle_DR_Progress_Bar_var min = 1 max = 8 }
		country_event = { id = kirin_council.308 hours = 1 }
		add_to_variable = { COC_24_var = 0.2 }
		add_to_variable = { COC_25_var = 0.1 }
		custom_effect_tooltip = KIR_line_break
		effect_tooltip = {
			swap_ideas = { add_idea = COC_pretender_mahogany_blaze_dummy2 remove_idea = COC_pretender_mahogany_blaze_dummy }
		}
	}
}

shared_focus = {
	id = BAC_COC_pretender_Y
	icon = GFX_goal_KIR_soldier_sitting
	relative_position_id = BAC_COC_pretender_1b
	x = -1
	y = 1

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_pretender_1b
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus BAC_COC_pretender_Y"
		custom_effect_tooltip = COC_dayspring_add1_tt
		add_to_variable = { COC_power_struggle_DR_var = 1 }
		add_to_variable = { COC_power_struggle_DR_Progress_Bar_var = 1 }
		clamp_variable = { var = COC_power_struggle_DR_var min = 0 max = 7 }
		clamp_variable = { var = COC_power_struggle_DR_Progress_Bar_var min = 1 max = 8 }
		custom_effect_tooltip = COC_pretender_Y_tt
		hidden_effect = { #summons 6 peasant militia
			random_owned_controlled_state = {
				create_unit = { division = "name = \"First Peasants' Army Division 'Vermilion Dreams'\" division_template = \"Peasant Militia\" start_equipment_factor = 0.99 start_experience_factor = 0.3" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"Second Peasants' Army Division 'Cerulean Skies'\" division_template = \"Peasant Militia\" start_equipment_factor = 0.96 start_experience_factor = 0.25" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"Third Peasants' Army Division 'Verdant Fields'\" division_template = \"Peasant Militia\" start_equipment_factor = 0.93 start_experience_factor = 0.25" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"Fourth Peasants' Army Division 'Cerise Meadows'\" division_template = \"Peasant Militia\" start_equipment_factor = 0.90 start_experience_factor = 0.25" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"Fifth Peasants' Army Division 'Azure Waves'\" division_template = \"Peasant Militia\" start_equipment_factor = 0.88 start_experience_factor = 0.25" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"Sixth Peasants' Army Division 'Indigo Nights'\" division_template = \"Peasant Militia\" start_equipment_factor = 0.87 start_experience_factor = 0.25" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"Seventh Peasants' Army Division 'Turquoise Hills'\" division_template = \"Peasant Militia\" start_equipment_factor = 0.88 start_experience_factor = 0.25" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"Eighth Peasants' Army Division 'Periwinkle Shores'\" division_template = \"Peasant Militia\" start_equipment_factor = 0.87 start_experience_factor = 0.25" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			random_owned_controlled_state = {
				create_unit = { division = "name = \"Ninth Peasants' Army Division 'Auburn Waters'\" division_template = \"Peasant Militia\" start_equipment_factor = 0.88 start_experience_factor = 0.25" owner = PREV allow_spawning_on_enemy_provs = no }
			}
			set_division_template_lock = {
				division_template = "Peasant Militia"
				is_locked = no
			}
		}
	}
}

shared_focus = {
	id = BAC_COC_pretender_2a
	icon = GFX_goal_KIR_speech
	relative_position_id = BAC_COC_pretender
	x = -2
	y = 3

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_pretender_X
		focus = BAC_COC_kindling_2
	}

	mutually_exclusive = {
		focus = BAC_COC_pretender_2b
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus BAC_COC_pretender_2a"
		custom_effect_tooltip = COC_kindling_add1_tt
		add_to_variable = { COC_power_struggle_KF_var = 1 }
		add_to_variable = { COC_power_struggle_KF_Progress_Bar_var = 1 }
		clamp_variable = { var = COC_power_struggle_KF_var min = 0 max = 7 }
		clamp_variable = { var = COC_power_struggle_KF_Progress_Bar_var min = 1 max = 8 }
		country_event = { id = kirin_council.309 hours = 1 }
		add_relation_modifier = {
			target = KIS
			modifier = COC_urban_agitation
		}
	}
}

shared_focus = {
	id = BAC_COC_pretender_2b
	icon = GFX_goal_KIR_kiria_unique
	relative_position_id = BAC_COC_pretender
	x = 2
	y = 3

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_pretender_Y
		focus = BAC_COC_dayspring_2
	}

	mutually_exclusive = {
		focus = BAC_COC_pretender_2a
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus BAC_COC_pretender_2b"
		custom_effect_tooltip = COC_dayspring_add1_tt
		add_to_variable = { COC_power_struggle_DR_var = 1 }
		add_to_variable = { COC_power_struggle_DR_Progress_Bar_var = 1 }
		clamp_variable = { var = COC_power_struggle_DR_var min = 0 max = 7 }
		clamp_variable = { var = COC_power_struggle_DR_Progress_Bar_var min = 1 max = 8 }
		country_event = { id = kirin_council.310 hours = 1 }
		add_relation_modifier = {
			target = KIS
			modifier = COC_devout_conviction
		}
	}
}

shared_focus = {
	id = BAC_COC_dayspring
	icon = GFX_goal_KIR_COC_trinity
	x = 19
	y = 0

	cost = 1.3

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_dayspring"
		country_event = { id = kirin_council.304 hours = 1 }
		add_manpower = 30000
		add_to_variable = { COC_14_var = 0.05 }
		custom_effect_tooltip = KIR_line_break
		effect_tooltip = {
			swap_ideas = { add_idea = COC_desperate_revolt_dummy1 remove_idea = COC_desperate_revolt_dummy }
		}
		KIR_dayspring_rose = { #added for BAC
			if = {
				limit = { is_unit_leader = no }
				hidden_effect = {
					add_corps_commander_role = { skill = 2 attack_skill = 1 defense_skill = 2 planning_skill = 2 logistics_skill = 2 }
					add_unit_leader_trait = kirin_race_trait
					add_unit_leader_trait = militias_officer
					add_unit_leader_trait = trait_SOV_determined
					#add_unit_leader_trait = KIR_Roaring_Fire_unit_leader_trait
				}
				custom_effect_tooltip = BAC_dayspring_stats_tp
			}
			else = { 
				add_unit_leader_trait = trait_SOV_determined
			}
		}
		custom_effect_tooltip = COC_dayspring_tt
		hidden_effect = {
			capital_scope = {
				create_unit = {
					division = "division_template = \"Peasant Militia\" start_experience_factor = 0.2 start_equipment_factor = 0.95"
					owner = PREV
					count = 6
				}
			}
		}
	}
}

shared_focus = {
	id = BAC_COC_dayspring_1a
	icon = GFX_goal_KIR_swords_crossed
	relative_position_id = BAC_COC_dayspring
	x = 1
	y = 1

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_dayspring
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_dayspring_1a"
		custom_effect_tooltip = COC_dayspring_add1_tt
		add_to_variable = { COC_power_struggle_DR_var = 1 }
		add_to_variable = { COC_power_struggle_DR_Progress_Bar_var = 1 }
		clamp_variable = { var = COC_power_struggle_DR_var min = 0 max = 7 }
		clamp_variable = { var = COC_power_struggle_DR_Progress_Bar_var min = 1 max = 8 }
		1073 = {
			remove_core_of = KIS
			add_core_of = ROOT
			start_resistance = yes
			custom_effect_tooltip = KIR_line_break
			add_resistance_target = {
				id = 1073
				amount = 50
				occupier = KIS
				#occupied = ROOT
				days = 365
				tooltip = COC_uprising_tt
			}
		}
	}
}

shared_focus = {
	id = BAC_COC_dayspring_2
	icon = GFX_goal_KIR_guerilla
	relative_position_id = BAC_COC_dayspring
	x = 0
	y = 2

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_pretender_1b
		focus = BAC_COC_dayspring_1a
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_dayspring_2"
		country_event = { id = kirin_council.311 hours = 1 }
		custom_effect_tooltip = KIR_line_break
		custom_effect_tooltip = COC_dayspring_2_tt
		effect_tooltip = {
			add_dynamic_modifier = { modifier = COC_trinitarian_militia scope = KIS }
		}
		set_country_flag = COC_trinitarian_militia_flag
	}
}

shared_focus = {
	id = BAC_COC_dayspring_X
	icon = GFX_goal_KIR_chainbreaker
	relative_position_id = BAC_COC_dayspring_2
	x = 1
	y = 1

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_dayspring_2
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_dayspring_X"
		custom_effect_tooltip = COC_dayspring_add1_tt
		add_to_variable = { COC_power_struggle_DR_var = 1 }
		add_to_variable = { COC_power_struggle_DR_Progress_Bar_var = 1 }
		clamp_variable = { var = COC_power_struggle_DR_var min = 0 max = 7 }
		clamp_variable = { var = COC_power_struggle_DR_Progress_Bar_var min = 1 max = 8 }
		country_event = { id = kirin_council.314 hours = 1 }
		custom_effect_tooltip = COC_dayspring_X_tt
		set_country_flag = COC_dayspring_X_flag
	}
}

shared_focus = {
	id = BAC_COC_dayspring_3
	icon = GFX_goal_KIR_nirik
	relative_position_id = BAC_COC_dayspring
	x = 0
	y = 4

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_dayspring_X
		focus = BAC_COC_pretender_2b
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_dayspring_3"
		country_event = { id = kirin_council.317 hours = 1 }
		add_manpower = 25000
		add_to_variable = { COC_17_var = 0.05 }
		custom_effect_tooltip = KIR_line_break
		effect_tooltip = {
			swap_ideas = { add_idea = COC_desperate_revolt_dummy3 remove_idea = COC_desperate_revolt_dummy }
		}
	}
}

shared_focus = {
	id = BAC_COC_dayspring_4a
	icon = GFX_goal_KIR_cub
	relative_position_id = BAC_COC_dayspring_3
	x = -2
	y = 1

	cost = 7.2

	prerequisite = {
		focus = BAC_COC_dayspring_3
	}

	mutually_exclusive = {
		focus = BAC_COC_kindling_4b
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_dayspring_4a"
		country_event = { id = kirin_council.312 hours = 1 }
		custom_effect_tooltip = COC_dayspring_add1_tt
		add_to_variable = { COC_power_struggle_DR_var = 1 }
		add_to_variable = { COC_power_struggle_DR_Progress_Bar_var = 1 }
		clamp_variable = { var = COC_power_struggle_DR_var min = 0 max = 7 }
		clamp_variable = { var = COC_power_struggle_DR_Progress_Bar_var min = 1 max = 8 }
		add_to_variable = { COC_16_var = 0.05 }
		custom_effect_tooltip = KIR_line_break
		effect_tooltip = {
			swap_ideas = { add_idea = COC_desperate_revolt_dummy4 remove_idea = COC_desperate_revolt_dummy }
		}
		random_controlled_state = {
			prioritize = { 1069 1076 1073 1077 }
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		random_controlled_state = {
			prioritize = { 1069 1076 1073 1077 }
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		random_controlled_state = {
			prioritize = { 1069 1076 1073 1077 }
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
}

shared_focus = {
	id = BAC_COC_dayspring_4b
	icon = GFX_goal_KIR_praise
	relative_position_id = BAC_COC_dayspring_3
	x = 1
	y = 1

	cost = 2.9

	prerequisite = {
		focus = BAC_COC_dayspring_3
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_dayspring_4b"
		army_experience = 75
		add_command_power = 75
		custom_effect_tooltip = super_combat_abilities_tt
	}
}

shared_focus = {
	id = BAC_COC_finale
	icon = GFX_goal_KIR_kiria_1007
	relative_position_id = BAC_COC_pretender
	x = 0
	y = 6

	cost = 4.8 #fixed from 2.9

	prerequisite = {
		focus = BAC_COC_dayspring_4a
		focus = BAC_COC_kindling_4b
	}

	available = {
		has_completed_focus = BAC_COC_kindling_X
		has_completed_focus = BAC_COC_dayspring_1a
		KIR_controls_all_kiria_proper = yes
		KIS = {
			NOT = {
				has_war_with = COC
			}
			OR = {
				exists = no
				is_subject_of = ROOT
				has_capitulated = yes
			}
		}
	}

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_finale"
		delete_unit_template_and_units = {
			division_template = "Peasant Militia"
			disband = no #will not refund equipment and manpower
		}
		add_political_power = 99
		add_stability = 0.09
		add_war_support = -0.333
		# KIR = { add_to_ROOT_potential_cores = yes }
		# KIS = { add_to_ROOT_potential_cores = yes }
		custom_effect_tooltip = KIR_line_break

		if = {
			limit = {
				set_temp_variable = { COC_power_struggle_DR_var_finale_temp = COC_power_struggle_DR_var }
				add_to_temp_variable = { COC_power_struggle_DR_var_finale_temp = 1 }
				check_variable = { COC_power_struggle_KF_var > COC_power_struggle_DR_var_finale_temp }
			}
			# every_country = {
			# 	limit = {
			# 		is_kiria_country = yes
			# 	}
			# 	news_event = { id = kirin_council.326 hours = 6 }
			# }
			set_country_flag = BAC_get_commonalty_flag
			custom_effect_tooltip = get_commonalty_tree_tt
			mark_focus_tree_layout_dirty = yes
		}
		else_if = {
			limit = {
				set_temp_variable = { COC_power_struggle_KF_var_finale_temp = COC_power_struggle_KF_var }
				add_to_temp_variable = { COC_power_struggle_KF_var_finale_temp = 1 }
				check_variable = { COC_power_struggle_DR_var > COC_power_struggle_KF_var_finale_temp }
			}
			every_country = {
				limit = {
					is_kiria_country = yes
				}
				news_event = { id = kirin_council.327 hours = 6 }
			}
		}
		else = {
			news_event = { id = kirin_council.321 hours = 3 }
		}
		remove_dynamic_modifier = { modifier = COC_desperate_revolt }
		clear_variable = COC_8_var
		clear_variable = COC_10_var
		clear_variable = COC_11_var #done
		clear_variable = COC_12_var
		clear_variable = COC_13_var
		clear_variable = COC_14_var ##Morale - done
		clear_variable = COC_15_var
		clear_variable = COC_16_var
		clear_variable = COC_17_var ##Breakthrough - done
		custom_effect_tooltip = KIR_line_break
		swap_ideas = {
			remove_idea = no_poverty
			add_idea = poverty1
		}
		swap_ideas = {
			remove_idea = tot_economic_mobilisation
			add_idea = undisturbed_isolation
		} #bac addition end
	}
}
shared_focus = { #BAC_COC_m1 - Prepare The Foundation
	id = BAC_COC_m1
	icon = GFX_goal_KIR_fire
	cost = 4.8
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_finale
	x = 0
	y = 2
	allow_branch = {
		check_variable = { baccocc_start_foci_completed < 3 }
		has_country_flag = BAC_get_commonalty_flag
	}
	prerequisite = {
		focus = BAC_COC_finale
		focus = BAC_COC_m2
	}
	select_effect = {
		country_event = {
			id = baccocc.1
			days = 3
			hours = 33
			random_hours = 33
		}
		every_possible_country = {
			limit = {
				has_character = KIC_rising_sun_u
			}
			KIC_rising_sun_u = { # Rising Sun technical university
				set_character_name = bac_CIT
				set_nationality = PREV.PREV
			}
		}
		#scoped_play_song = "Leonhart_LARK"
	}
	available = {
		hidden_trigger = {
			NOT = { has_country_flag = your_focus_fucked_up_bac_flag }
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_m1"
		#add_to_variable = { baccocc_start_foci_completed = 1 }
		#mark_focus_tree_layout_dirty = yes
		#add_to_variable = { coc_t_foci_completed = 1 }
		hidden_effect = {
			set_temp_variable = { coalition_partner_var = token:neutrality }
			add_to_coalition = yes
		}
		if = {
			limit = {
				has_completed_focus = BAC_COC_m1 
			}
			if = {
				limit = { 
					check_variable = { baccocc_start_foci_completed = 0 }
				}
				custom_effect_tooltip = bac_cheater_tt
				custom_effect_tooltip = KIR_line_break
				custom_effect_tooltip = BAC_COC_M1_tt
			}
			else = {
				effect_tooltip = {
					country_event = baccocc.1
					set_party_name = {
						ideology = neutrality
						long_name = BAC_COC_na_party_0_long
						name = BAC_COC_na_party_0
					}
				}
				set_temp_variable = { coalition_partner_var = token:neutrality }
				custom_effect_tooltip = add_to_coalition
			}
		}
		else = {
			effect_tooltip = {
				country_event = baccocc.1
			}
		}
	}
	available_if_capitulated = no
}
shared_focus = { #BAC_COC_h1 - Honour Our Friends
	id = BAC_COC_h1 
	icon = GFX_goal_solar_maternal_guidance #GFX_griffking_utopia #
	cost = 1.3
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_m1
	x = -3
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed < 3 }
		check_variable = { baccocc_start_foci_completed > 0 }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_h1"
		add_war_support = 0.033
		custom_effect_tooltip = KIR_line_break
		bac_COT_mega_effect = yes
		#add_to_variable = { coc_h_foci_completed = 1 }
		add_to_variable = { baccocc_start_foci_completed = 1 }
		if = {
			limit = { check_variable = { baccocc_start_foci_completed = 3 } }
			mark_focus_tree_layout_dirty = yes
		}
	}
}
shared_focus = { #BAC_COC_c1 - The Voice Must Be Spoken
	id = BAC_COC_c1
	icon = GFX_goal_KIR_flaming_yin_yang #GFX_goal_autonomism
	cost = 1.3
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_m1
	x = 3
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed < 3 }
		check_variable = { baccocc_start_foci_completed > 0 }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_c1"
		add_to_variable = { baccocc_start_foci_completed = 1 }
		add_stability = 0.033
		bac_WPU_mega_effect = yes
		#add_to_variable = { coc_c_foci_completed = 1 }
		if = {
			limit = { check_variable = { baccocc_start_foci_completed = 3 } }
			mark_focus_tree_layout_dirty = yes
		}
	}
}
shared_focus = { #BAC_COC_m2 - Commonalty Constitutional Senate
	id = BAC_COC_m2 #제헌만민회
	icon = GFX_goal_KIR_verdigris_rotunda
	cost = 4.8
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_m1
	x = 0
	y = 0
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 2 }
		check_variable = { baccocc_start_foci_completed < 6 }
	}
	prerequisite = {
		focus = BAC_COC_finale
		focus = BAC_COC_m1
	}
	# available = {
	# 	custom_trigger_tooltip = {
	# 		tooltip = BAC_please_take_previous_foci
	# 		check_variable = { baccocc_start_foci_completed > 2 }
	# 	}
	# }
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_m2"
		add_to_variable = { baccocc_start_foci_completed = 1 }
		#add_to_variable = { coc_t_foci_completed = 1 }
		if = {
			limit = { check_variable = { baccocc_start_foci_completed = 6 } }
			mark_focus_tree_layout_dirty = yes
		}
		swap_ideas = {
			remove_idea = undisturbed_isolation
			add_idea = isolation
		}
	}
}
shared_focus = { # Adopt Equestrian Autunomy System
	id = BAC_COC_h2
	icon = GFX_goal_solar_harmony_in_order
	cost = 1.3
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_m1
	x = -3
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 2 }
		check_variable = { baccocc_start_foci_completed < 6 }
	}
	available = {
		has_completed_focus = BAC_COC_m2
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_h2"
		country_event = { id = baccocc.6 hours = 3 random_hours = 33 }
		bac_COT_large_effect = yes
		custom_effect_tooltip = KIR_line_break
		custom_effect_tooltip = BAC_start_phase_2_tt
		add_to_variable = { baccocc_start_foci_completed = 1 }
		effect_tooltip = {
			swap_ideas = {
				remove_idea = BAC_road_to_direct_democracy_dummy_0
				add_idea = BAC_road_to_direct_democracy_dummy_h
			}
		}
		#add_to_variable = { coc_h_foci_completed = 1 }
		if = {
			limit = { check_variable = { baccocc_start_foci_completed = 6 } }
			mark_focus_tree_layout_dirty = yes
		}
	}
}
shared_focus = { # Our Cause Must Be Informed
	id = BAC_COC_c2
	icon = GFX_goal_KIR_kirin_leaping #GFX_goal_KIR_speech #GFX_goal_KIR_microphone #
	cost = 1.3
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_m1
	x = 3
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 2 }
		check_variable = { baccocc_start_foci_completed < 6 }
	}
	available = {
		has_completed_focus = BAC_COC_m2
	# 	custom_trigger_tooltip = {
	# 		tooltip = BAC_please_take_previous_foci
	# 		check_variable = { baccocc_start_foci_completed > 2 }
	# 	}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_c2"
		country_event = { id = baccocc.7 hours = 3 random_hours = 33 }
		add_to_variable = { baccocc_start_foci_completed = 1 }
		#add_to_variable = { COC_c_foci_completed = 1 }
		bac_WPU_large_effect = yes
		custom_effect_tooltip = KIR_line_break
		custom_effect_tooltip = BAC_start_phase_2_tt
		effect_tooltip = {
			swap_ideas = {
				remove_idea = BAC_road_to_direct_democracy_dummy_0
				add_idea = BAC_road_to_direct_democracy_dummy_c
			}
		}
		
		if = {
			limit = { check_variable = { baccocc_start_foci_completed = 6 } }
			mark_focus_tree_layout_dirty = yes
		}
	}
}
shared_focus = {
	id = BAC_COC_m3
	icon = GFX_goal_KIR_constitution_unique
	cost = 2.9
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_m1
	x = 0
	y = 0
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 5 }
	}

	prerequisite = {
		focus = BAC_COC_finale
		focus = BAC_COC_m1
	}
	available = {
		# custom_trigger_tooltip = {
		# 	tooltip = BAC_please_take_previous_foci
		# 	check_variable = { baccocc_start_foci_completed > 5 }
		# }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_m3"
		add_to_variable = { baccocc_start_foci_completed = 1 }
		swap_ideas = {
			remove_idea = isolation
			add_idea = civilian_economy
		}
	}
}
shared_focus = {
	id = BAC_COC_h3
	icon = GFX_orderdiplo
	cost = 1.3
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_m1
	x = -3
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 5 }
		check_variable = { baccocc_start_foci_completed < 10 }
	}
	available = {
		has_completed_focus = BAC_COC_m3
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_h3"
		if = {
			limit = {
				has_idea = closed_economy
			}
			swap_ideas = {
				remove_idea = closed_economy
				add_idea = limited_exports
			}
		}
		bac_COT_medium_effect = yes

		add_to_variable = { baccocc_start_foci_completed = 1 }
		if = {
			limit = { check_variable = { baccocc_start_foci_completed = 9 } }
			mark_focus_tree_layout_dirty = yes
		}
	}
}
shared_focus = { # Land Investigation Program
	id = BAC_COC_c3
	icon = GFX_goal_JER_herzland_revolution
	cost = 1.3
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_m1
	x = 3
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 5 }
		check_variable = { baccocc_start_foci_completed < 10 }
	}
	available = {
		has_completed_focus = BAC_COC_m3
	}
	
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_c3"
		add_stability = -0.03
		increase_society_development_gradual = yes
		every_controlled_state = {
			limit = { NOT = { is_core_of = ROOT } }
			add_resistance = 33
			add_compliance = -3
		}
		bac_WPU_medium_effect = yes
		add_to_variable = { baccocc_start_foci_completed = 1 }
		if = {
			limit = { check_variable = { baccocc_start_foci_completed = 9 } }
			mark_focus_tree_layout_dirty = yes
		}
	}
}
shared_focus = {
	id = BAC_COC_true_commonalty
	icon = GFX_goal_KIR_tristar
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_m1
	x = 0
	y = 2
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 8 }
	}
	prerequisite = {
		focus = BAC_COC_m3
		focus = BAC_COC_m1
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_true_commonalty"
		add_to_variable = { baccocc_start_foci_completed = 1 }
		custom_effect_tooltip = KIR_line_break
		custom_effect_tooltip = BAC_COC_true_commonalty_tt
		custom_effect_tooltip = KIR_line_break
		mark_focus_tree_layout_dirty = yes
		every_country = {
			limit = {
				is_kiria_country = yes
			}
			news_event = { id = kirin_council.326 hours = 3 } #bac
		}
		hidden_effect = {
			set_party_name = {
				ideology = neutrality
				long_name = BAC_COC_na_party_1_long
				name = BAC_COC_na_party_1
			}
		}
	}
}

shared_focus = {
	id = BAC_COC_pol_head
    icon = {
        trigger = { has_completed_focus = BAC_COC_pol_head }
        value = GFX_goal_bac_dayspring
    }
	icon = GFX_goal_KIR_teaching
	cost = 4.8
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_m1
	x = 0
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_true_commonalty
		focus = BAC_COC_m1
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_pol_head"
		KIR_dayspring_rose = {
			unit_leader_event = { id = baccocc.10 hours = 3 random_hours = 33 } #Matter of Educational Model
		}
		decrease_illiteracy = yes
		bac_COT_small_effect = yes
	}
}

shared_focus = { # Assertive Conversion
	id = BAC_COC_pol_h1
	icon = GFX_goal_solar_care_for_weak
	cost = 4.8
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_pol_head
	x = 1
	y = 1
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_pol_head
	}
	mutually_exclusive = {
		focus = BAC_COC_pol_c1
	}
	available = {
		has_country_flag = baccocc_10a_flag
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_pol_h1"
		add_political_power = 33
		add_stability = -0.033
		every_controlled_state = {
			limit = { is_claimed_by = KIS }
			remove_claim_by = KIS
		}
		every_controlled_state = {
			limit = { is_claimed_by = KIR }
			remove_claim_by = KIR
		}
		decrease_illiteracy = yes
		bac_eqs_popularity = yes
		bac_COT_small_effect = yes
	}
}
shared_focus = { #Allow The Way of Fire
	id = BAC_COC_pol_c1
	icon = GFX_goal_KIR_chrysanthemum #GFX_goal_KIR_matriarch #GFX_goal_KIR_cooperation
	cost = 4.8
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_pol_head
	x = -1
	y = 1
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_pol_head
	}
	mutually_exclusive = {
		focus = BAC_COC_pol_h1
	}
	available = {
		has_country_flag = baccocc_10b_flag
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_pol_c1"
		add_political_power = -33
		add_stability = 0.033
		every_controlled_state = {
			limit = { is_claimed_by = KIS }
			remove_claim_by = KIS
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = democratic
			popularity = -0.03
		}
		bac_WPU_small_effect = yes
	}
}


shared_focus = { #Expand Foreign Affairs
	id = BAC_COC_diplo
	icon = GFX_goal_KIR_goal_government_icon
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_pol_head
	x = -4
	y = 0
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_true_commonalty
		focus = BAC_COC_m1
	}
	available = {
		NOT = { has_idea = closed_economy }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_diplo"
		custom_effect_tooltip = BAC_COC_diplo_tt
		hidden_effect = {
			for_each_scope_loop = {
				array = global.states
				if = {
					limit = {
						is_capital = yes
					}
					add_to_array = {
						array = ROOT.COC_EMBASSY_ARRAY
						value = THIS
					}
				}
			}
			save_global_event_target_as = bac_commonalty_target
		}
		set_country_flag = bac_diplo_expanded
		custom_effect_tooltip = KIR_line_break
		unlock_decision_tooltip = comm_WPU_commiebro
	}
}
shared_focus = {
	id = BAC_COC_modern_science
	icon = GFX_goal_KIR_collegium_focus
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_pol_head
	x = -2
	y = 0
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_true_commonalty
		focus = BAC_COC_m1
	}
	available = {
		has_completed_focus = BAC_COC_pol_head
		does_not_have_pre_industrial_society = yes
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_modern_science"
		set_country_flag = KIC_rising_sun_u_available
		custom_effect_tooltip = available_theorist
		show_ideas_tooltip = KIC_rising_sun_u
		custom_effect_tooltip = KIR_line_break
		increase_science_base = yes
		add_research_slot = 1
	}
}
shared_focus = { # Research and Development Complex
	id = BAC_COC_applied_science
	icon = GFX_goal_break_into_the_electronic_industry
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_pol_head
	x = -3
	y = 1
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_modern_science
		focus = BAC_COC_m1
	}
	available = {
		has_modern_society = yes
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_applied_science"
		set_country_flag = KIC_tank_designer_1_available
		set_country_flag = KIC_tank_designer_2_available
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			custom_effect_tooltip = available_mio_tt
			show_mio_tooltip = KIC_tank_designer_1_organization
			mio:KIC_tank_designer_1_organization = {
				add_mio_size = 1
				add_mio_funds = 333
			}
			custom_effect_tooltip = available_mio_tt
			show_mio_tooltip = KIC_tank_designer_2_organization
			mio:KIC_tank_designer_2_organization = {
				add_mio_size = 1
				add_mio_funds = 333
			}
		}
		else = {
			custom_effect_tooltip = available_designer_individual
			show_ideas_tooltip = KIC_tank_designer_1
			custom_effect_tooltip = available_designer_individual
			show_ideas_tooltip = KIC_tank_designer_2
		}
		custom_effect_tooltip = KIR_line_break
		increase_science_base = yes
		add_research_slot = 1
	}
}

shared_focus = { # Purge The Extremist Conservatives
	id = BAC_COC_pol_h2
	icon = GFX_goal_solar_inquisition
	cost = 4.8
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_pol_head
	x = 2
	y = 2
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_pol_h1
	}
	available = {
		if = {
			limit = { is_ai = no }
			power_balance_value = {
				id = BAC_commonalty_bop
				value > 0.099
			}
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_pol_h2"
		every_core_state = {
			limit = { is_core_of = KIS }
			remove_core_of = KIS
		}
		every_core_state = {
			limit = { is_core_of = KIR }
			remove_core_of = KIR
		}
		set_party_name = {
			ideology = fascism
			long_name = BAC_COC_fascism_party_long
			name = BAC_COC_fascism_party
		}
		set_temp_variable = { coalition_partner_var = token:fascism }
		add_to_coalition = yes
		if = {
			limit = { has_country_flag = baccocc_7b_flag }
			add_country_leader_role = {
				character = "COC_common_senate"
				promote_leader = yes
				country_leader = {
					desc = "BAC_COC_common_senate_desc" #bac
					ideology = falangism
					expire = "1965.1.1.1"
					traits = { BAC_road_to_direct_democracy BAC_regional_self_centeredness } #bac
				}
			}
		}
		else = {
			add_country_leader_role = {
				character = "COC_common_senate"
				promote_leader = yes
				country_leader = {
					desc = "BAC_COC_common_senate_desc" #bac
					ideology = falangism
					expire = "1965.1.1.1"
					traits = { BAC_road_to_direct_democracy } #bac
				}
			}
		}
		add_popularity = { #disharmony
			ideology = fascism
			popularity = 0.033
		}
		bac_COT_small_effect = yes
		custom_effect_tooltip = KIR_line_break
		save_current_manpower = yes
		every_controlled_state = {
			limit = {
				OR = {
					has_resistance = yes
					state = 1071 #fragrance
					state = 1059 #Vermilion
					state = 1060 #Rhapsody
					state = 1062 #agate
					state = 1064 #Massicot
					state = 817 #Radiance
				}
			}
			add_manpower = -333
		}
		restore_previous_manpower = yes
		unlock_decision_tooltip = comm_COT_pursuit
	}
}

shared_focus = { #Justice For Common
	id = BAC_COC_pol_m2
	icon = GFX_goal_KIR_table
	cost = 4.8
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_pol_head
	x = 0
	y = 2
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_pol_h1
		focus = BAC_COC_pol_c1
	}
	bypass = {
		if = {
			limit = {
				1071 = {
					owner = {
						original_tag = CHN
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = BAC_COC_pol_m2_ctt
				NOT = { has_country_flag = KIS_event_737_fickle_current_POW_flag }
			}
		}
		else = { hidden_trigger = { always = no } }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_pol_m2"
		country_event = { #Trial of NAKP and Divine Fire
			id = baccocc.11
			hours = 3
			random_hours = 33
		}
	}
}
shared_focus = {
	id = BAC_COC_pol_c2
	icon = GFX_goal_KIR_unity
	cost = 4.8
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_pol_head
	x = -2
	y = 2
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_pol_c1
	}
	available = {
		if = {
			limit = { is_ai = no }
			power_balance_value = {
				id = BAC_commonalty_bop
				value < -0.099
			}
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_pol_c2"
		add_political_power = -33
		decrease_illiteracy = yes
		unlock_decision_tooltip = comm_WPU_WOF
		bac_WPU_small_effect = yes
	}
}


shared_focus = {
	id = BAC_COC_pol_h3 
	icon = GFX_goal_solar_harmony_in_order
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_pol_head
	x = 1
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_pol_h2
		focus = BAC_COC_pol_c2
	}
	prerequisite = {
		focus = BAC_COC_pol_m2
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_pol_h3"
		if = {
			limit = { has_completed_focus = BAC_COC_pol_h2 }
			save_current_manpower = yes
			1079 = {
				add_manpower = -333
			}
			restore_previous_manpower = yes
		}
		else = {
			bac_COT_small_effect = yes
		}
		set_country_flag = KIR_aureolin_monastery_available
		decrease_illiteracy = yes
		add_research_slot = 1
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			custom_effect_tooltip = available_mio_tt
			show_mio_tooltip = KIR_aureolin_monastery
			mio:KIR_aureolin_monastery = {
				add_mio_size = 1
				add_mio_funds = 333
				set_mio_flag = cocc_cot_mio_flag
			}
			custom_effect_tooltip = BAC_mio_size_up_prefix
			custom_effect_tooltip = BAC_mio_size_up_cot
		}
		else = {
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = KIR_aureolin_monastery
		}
	}
}
shared_focus = {
	id = BAC_COC_pol_c3 
	icon = GFX_goal_KIR_embrace
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_pol_head
	x = -1
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_pol_h2
		focus = BAC_COC_pol_c2
	}
	prerequisite = {
		focus = BAC_COC_pol_m2
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_pol_c3"
		hidden_effect = { #todo needs test
			COC_common_senate = {
				swap_country_leader_traits = {
					remove = BAC_road_to_direct_democracy
					add = BAC_direct_democracy
					ideology = harmonic_theocracy
				}
				swap_country_leader_traits = {
					remove = BAC_road_to_direct_democracy
					add = BAC_direct_democracy
					ideology = democratic_socialism
				}
			}
			set_country_leader_description = {
				ideology = democratic
				desc = COC_common_senate_desc
			}
			set_country_leader_description = {
				ideology = communism
				desc = COC_common_senate_desc
			}
			if = {
				limit = { has_completed_focus = BAC_COC_pol_h2 }
				COC_common_senate = {
					swap_country_leader_traits = {
						remove = BAC_road_to_direct_democracy
						add = BAC_direct_democracy
						ideology = falangism
					}
				}
				set_country_leader_description = {
					ideology = fascism
					desc = COC_common_senate_desc
				}
			}
		}
		effect_tooltip = {
			swap_ruler_traits = { remove = BAC_road_to_direct_democracy add = BAC_direct_democracy }
		}
		custom_effect_tooltip = KIR_line_break
		bac_WPU_small_effect = yes
	}
}

shared_focus = { #Century for Commonalty
	id = BAC_COC_pol_m4
	icon = GFX_goal_UESR_TNO_post_scarcity
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_pol_head
	x = 0
	y = 5
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
		has_country_flag = COC_war_committee_flag
	}
	prerequisite = {
		focus = BAC_COC_pol_h3
	}
	prerequisite = {
		focus = BAC_COC_pol_c3
	}
	prerequisite = {
		focus = BAC_COC_pol_m2
	}
	available = {
		custom_trigger_tooltip = {
			tooltip = BAC_COC_pol_m4_ctt
			has_country_flag = commonalty_solved_deer
			has_country_flag = commonalty_solved_barbarian
			has_country_flag = commonalty_solved_zaikiria
			has_country_flag = commonalty_solved_taungpau
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_pol_m4"
		set_cosmetic_tag = BAC_commonalty #todo check this if it sucks
		country_event = {
			id = baccocc.303
			hours = 3
			random_hours = 33
		}
	}
}

shared_focus = { #Committee For Industry And Development
	id = BAC_COC_eco_head
    icon = {
        trigger = { has_completed_focus = BAC_COC_eco_head }
        value = GFX_goal_bac_kindling
    }
	icon = GFX_goal_KIR_kiria_1007
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_m1
	x = -6
	y = 3
	
	prerequisite = {
		focus = BAC_COC_true_commonalty
		focus = BAC_COC_m1
	}
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_head"
		unlock_decision_tooltip = bac_finish_railway
		KIR_kindling_flash = {
			add_trait = {
				slot = political_advisor
				trait = BAC_maestro
			}
		}
		custom_effect_tooltip = KIR_line_break
		bac_WPU_small_effect = yes
	}
}


shared_focus = { #Equestrian Model of Development
	id = BAC_COC_eco_h1 #Equestrian Model of Development
	icon = GFX_goal_solar_legion_of_labour
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_eco_head
	x = 1
	y = 1
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_eco_head
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_h1"
		bac_eqs_popularity = yes
		add_ideas = BAC_COC_eco_h1_idea
		bac_COT_small_effect = yes
	}
}

shared_focus = { #Initiate Land Reform
	id = BAC_COC_eco_c1
	icon = GFX_goal_KIR_crumble #
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_eco_head
	x = -1
	y = 1
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_eco_head
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_c1"
		add_timed_idea = { idea = BAC_COC_eco_c1_idea days = 333 }
		every_controlled_state = {
			limit = { NOT = { is_core_of = ROOT } }
			add_resistance = 33
			add_compliance = -3
		}
		KIR = { add_to_ROOT_potential_cores = yes }
		KIS = { add_to_ROOT_potential_cores = yes }
		custom_effect_tooltip = KIR_line_break
		decrease_poverty = yes
		bac_WPU_small_effect = yes
	}
}


shared_focus = { #New Campaign Town
	id = BAC_COC_eco_m2
	icon = GFX_goal_KIR_construction
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_eco_head
	x = 0
	y = 2
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_eco_h1
		focus = BAC_COC_eco_c1
	}
	available = {
		has_stability > 0.33
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_m2"
		random_core_state = {
			limit = {
				infrastructure < 5
			}
			prioritize = { 1069 1076 1073 1077 }
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		random_core_state = {
			limit = {
				infrastructure < 5
			}
			prioritize = { 1069 1076 1073 1077 }
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		random_core_state = {
			limit = {
				infrastructure < 5
			}
			prioritize = { 1069 1076 1073 1077 }
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		increase_society_development_gradual = yes
	}
}
shared_focus = { # #Equestrian Ties
	id = BAC_COC_eco_h2 #Equestrian Ties
	icon = {
		trigger = { country_exists = event_target:solar_empire }
		value = GFX_goal_solar_corporate_council
	}
	icon = GFX_goal_PLB_eqs_ties
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_eco_head
	x = 2
	y = 2
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_eco_h1
	}
	prerequisite = {
		focus = BAC_COC_diplo
		focus = BAC_COC_m1
	}
	available = {
		NOT = { has_idea = closed_economy }
		if = {
			limit = { country_exists = event_target:solar_empire }
			if = {
				limit = { has_completed_focus = BAC_COC_pol_h2 }
				fascism > 0.09
			}
			else = { has_completed_focus = BAC_COC_pol_h2 }
			event_target:solar_empire = {
				is_subject = no
				surrender_progress < 0.1
				NOT = {
					has_war_with = ROOT
				}
				if = {
					limit = {
						ROOT = { is_ai = no }
					}
					has_opinion = { target = ROOT value > 33 }
				}
			}
		}
		else = {
			event_target:equestria = {
				exists = yes
				is_subject = no
				surrender_progress < 0.1
				NOT = {
					has_war_with = ROOT
				}
				if = {
					limit = {
						ROOT = { is_ai = no }
					}
					has_opinion = { target = ROOT value > 33 }
				}
			}
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_h2"
		bac_eqs_popularity = yes
		unlock_decision_tooltip = comm_COT_civ
		unlock_decision_tooltip = comm_COT_CES
		custom_effect_tooltip = BAC_COC_eco_h2_tt
		bac_COT_small_effect = yes
		hidden_effect = {
			EQS = {
				add_opinion_modifier = {
					target = ROOT
					modifier = commonalty_embassy
				}
				add_relation_modifier = {
					target = ROOT
					modifier = commonalty_embassy
				}
				ROOT = {
					add_opinion_modifier = {
						target = PREV
						modifier = commonalty_embassy
					}
					add_relation_modifier = {
						target = PREV
						modifier = commonalty_embassy
					}
					add_opinion_modifier = {
						target = PREV
						modifier = commonalty_embassy_trade
					}
				}
			}
		}
	}
}

shared_focus = { #QKdzz
	id = BAC_COC_eco_c2
	icon = GFX_goal_KIR_bread
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_eco_head
	x = -2
	y = 2
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_eco_c1
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_c2"
		hidden_effect = {
			add_timed_idea = { idea = BAC_famine_timed days = 730 }
			remove_ideas = BAC_famine_initial
		}
		effect_tooltip = {
			swap_ideas = {
				remove_idea = BAC_famine_initial
				add_idea = BAC_famine_timed
			}
		}
		custom_effect_tooltip = BAC_COC_eco_c2_tt
		decrease_poverty = yes
		bac_WPU_medium_effect = yes
	}
}


shared_focus = {
	id = BAC_COC_eco_m3h
	icon = GFX_goal_KIR_barrels
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_eco_head
	x = 1
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_eco_m2
		focus = BAC_COC_eco_h2
		focus = BAC_COC_eco_c2
	}
	available = {
		has_stability > 0.5
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_m3h"
		add_stability = -0.03
		add_tech_bonus = {
			name = BAC_COC_eco_m3h
			bonus = 3.0
			uses = 3
			category = synth_resources
		}
		random_core_state = {
			limit = { naval_base > 0 }
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = synthetic_refinery
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
		increase_society_development_gradual = yes
	}
}





shared_focus = {
	id = BAC_COC_eco_m3c
	icon = GFX_goal_KIR_resources
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_eco_head
	x = -1
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_eco_m2
		focus = BAC_COC_eco_h2
		focus = BAC_COC_eco_c2
	}
	available = {
		has_stability > 0.5
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_m3c"
		add_stability = -0.03
		random_core_state = {
			limit = {
				is_fully_controlled_by = ROOT
				free_building_slots = {
					building = industrial_complex
					size > 0
					include_locked = yes
				}
				state_has_any_resource = yes
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
		increase_society_development_gradual = yes
		set_country_flag = kiria_resource_develop_decisions_unlocked
		unlock_decision_tooltip = develop_sorghum_steel
		unlock_decision_tooltip = develop_peril_peaks_mines
		unlock_decision_tooltip = develop_jade_crystals
		unlock_decision_tooltip = develop_trypan_crystals
		unlock_decision_tooltip = develop_providence_demesne_aluminium
		unlock_decision_tooltip = develop_sunshine_chromium
		unlock_decision_tooltip = develop_vermilion_basin_crystals
		unlock_decision_tooltip = develop_vermilion_basin_tungsten
	}
}

shared_focus = {
	id = BAC_COC_eco_c3
	icon = GFX_goal_HEL_anar_peasant
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_eco_head
	x = -3
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_eco_c2
	}
	available = {
		NOT = { has_idea = BAC_COC_eco_c1_idea }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_c3"
		add_ideas = BAC_COC_eco_c3_idea
		increase_society_development_gradual = yes
		decrease_poverty = yes
		bac_WPU_medium_effect = yes
	}
}

shared_focus = { #Yet Another Accord
	id = BAC_COC_eco_h3
	icon = {
		trigger = { country_exists = event_target:solar_empire }
		value = GFX_goal_solar_fair_but_just
	}
	icon = GFX_goal_EQS_TNO_equestria_saved #GFX_goal_UESR_TNO_sun_moon
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_eco_head
	x = 3
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_eco_h2
	}
	available = {
		power_balance_value = {
			id = BAC_commonalty_bop
			value > 0.099
		}
		NOT = { has_idea = closed_economy }
		if = {
			limit = { country_exists = event_target:solar_empire }
			if = {
				limit = { has_completed_focus = BAC_COC_pol_h2 }
				fascism > 0.09
			}
			else = { has_completed_focus = BAC_COC_pol_h2 }
			event_target:solar_empire = {
				is_subject = no
				surrender_progress < 0.1
				NOT = {
					has_war_with = ROOT
				}
				if = {
					limit = {
						ROOT = { is_ai = no }
					}
					has_opinion = { target = ROOT value > 99 }
				}
			}
		}
		else = {
			event_target:equestria = {
				exists = yes
				is_subject = no
				surrender_progress < 0.1
				NOT = {
					has_war_with = ROOT
				}
				if = {
					limit = {
						ROOT = { is_ai = no }
					}
					has_opinion = { target = ROOT value > 99 }
				}
			}
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_h3"
		add_ideas = bac_verdant_accord_idea
		if = {
			limit = { country_exists = event_target:solar_empire }
			event_target:solar_empire = { add_ideas = bac_verdant_accord_eqs_idea }
		}
		else = { event_target:equestria = { add_ideas = bac_verdant_accord_eqs_idea } }
		custom_effect_tooltip = KIR_line_break
		if = {
			limit = {
				has_idea = limited_exports
			}
			swap_ideas = {
				remove_idea = limited_exports
				add_idea = export_focus
			}
			custom_effect_tooltip = KIR_line_break
		}
		bac_eqs_popularity = yes
		bac_COT_medium_effect = yes
		custom_effect_tooltip = KIR_line_break
		increase_society_development_gradual = yes
	}
}
# shared_focus = { #BAC_COC_eco_h3 #The Lodge
# 	id = BAC_COC_eco_h3 #The Lodge
# 	icon = {
# 		trigger = { country_exists = event_target:solar_empire }
# 		value = GFX_goal_CES_daybreaker
# 	}
# 	icon = GFX_goal_ces_approach_baltimare #GFX_goal_UESR_TNO_sun_moon
# 	cost = 7
# 	ai_will_do = { factor = 80 }
# 	relative_position_id = BAC_COC_eco_head
# 	x = 3
# 	y = 3
# 	allow_branch = {
# 		check_variable = { baccocc_start_foci_completed > 9 }
# 	}
# 	prerequisite = {
# 		focus = BAC_COC_eco_h2
# 	}
# 	available = {
# 		if = {
# 			limit = {
# 				has_global_flag = equestrian_civil_war
# 				CES = {
# 					exists = yes
# 					is_subject = no
# 				}
# 			}
# 			if = {
# 				limit = { is_ai = no }
# 				power_balance_value = {
# 					id = BAC_commonalty_bop
# 					value > 0.099
# 				}
# 				CES = { has_opinion = { target = ROOT value > 33 } exists = yes is_subject = no has_war = no }
# 				if = { #equestria.154
# 					limit = { country_exists = event_target:solar_empire }
# 					fascism > 0.09
# 				}
# 			}
# 			else = { CES = { exists = yes is_subject = no has_war = no } }
# 		}
# 		else = {
# 			EQS = { exists = yes is_subject = no has_war = no }
# 			if = {
# 				limit = { is_ai = no }
# 				power_balance_value = {
# 					id = BAC_commonalty_bop
# 					value > 0.099
# 				}
# 				if = { #equestria.154
# 					limit = { country_exists = event_target:solar_empire }
# 					fascism > 0.09
# 				}
# 			}
# 		}
# 	}
# 	completion_reward = {
# 		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_h3"
# 		bac_eqs_popularity = yes
# 		decrease_poverty = yes
# 		if = {
# 			limit = { country_exists = CES }
# 			custom_effect_tooltip = BAC_COC_eco_h3_tt
# 			hidden_effect = {
# 				CES = {
# 					add_opinion_modifier = {
# 						target = ROOT
# 						modifier = commonalty_embassy
# 					}
# 					add_relation_modifier = {
# 						target = ROOT
# 						modifier = commonalty_embassy
# 					}
# 					ROOT = {
# 						add_opinion_modifier = {
# 							target = PREV
# 							modifier = commonalty_embassy
# 						}
# 						add_relation_modifier = {
# 							target = PREV
# 							modifier = commonalty_embassy
# 						}
# 						add_opinion_modifier = {
# 							target = PREV
# 							modifier = commonalty_embassy_trade
# 						}
# 					}
# 				}
# 			}
# 		}
# 		#unlock_decision_tooltip = my_decision
# 		bac_COT_medium_effect = yes
# 	}
# }


shared_focus = {
	id = BAC_COC_eco_h4
	icon = {
		trigger = { country_exists = event_target:solar_empire }
		value = GFX_goal_solar_defence_of_the_empire
	}
	icon = GFX_goal_generic_equestria
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_eco_head
	x = 4
	y = 4
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_eco_h3
	}
	available = {
		has_modern_society = yes
		has_idea = bac_verdant_accord_idea
		NOT = { has_idea = closed_economy }
		if = {
			limit = { is_ai = no }
			if = {
				limit = { country_exists = event_target:solar_empire }
				fascism > 0.33
			}
			else = {
				democratic > 0.33
			}
			power_balance_value = {
				id = BAC_commonalty_bop
				value > 0.33
			}
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_h4"
		swap_ideas = {
			remove_idea = bac_verdant_accord_idea
			add_idea = bac_verdant_accord_2_idea
		}
		if = {
			limit = {
				has_idea = export_focus
			}
			swap_ideas = {
				remove_idea = export_focus
				add_idea = free_trade
			}
			custom_effect_tooltip = KIR_line_break
		}
		bac_eqs_popularity = yes
		bac_COT_large_effect = yes
	}
}
shared_focus = { #Plan Zebrica -build docks
	id = BAC_COC_eco_m4h
	icon = GFX_goal_KIR_docks
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_eco_head
	x = 2
	y = 4
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_eco_m3h
		focus = BAC_COC_eco_h3
	}
	available = {
		has_war_support > 0.5
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_m4h"
		add_political_power = -33
		add_timed_idea = {
			idea = BAC_naval_rebuilding
			days = 1095
		}
		every_controlled_state = {
			limit = {
				is_fully_controlled_by = ROOT
				free_building_slots = {
					building = dockyard
					size > 0
					include_locked = yes
				}
				infrastructure < 5
				is_coastal = yes
			}
			random_select_amount = 3
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = dockyard
				level = 3
				instant_build = yes
			}
		}
		custom_effect_tooltip = KIR_line_break
		bac_COT_small_effect = yes
	}
}

shared_focus = {
	id = BAC_COC_eco_m4m
	icon = GFX_goal_KIR_electricity
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_eco_head
	x = 0
	y = 4
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_eco_m3h
		focus = BAC_COC_eco_m3c
	}
	available = {
		has_modern_society = yes
		has_stability > 0.66
	}
	completion_reward = { #maybe it would be some fancy gui mechanic? but not now
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_m4m"
		custom_effect_tooltip = BAC_COC_eco_m4m_tt
		set_country_flag = BAC_COC_eco_m4m_flag
		capital_scope = {
			increase_state_category = yes
			add_victory_points = {
				province = 20626
				value = 9
			}
			custom_effect_tooltip = KIR_line_break
			add_dynamic_modifier = { modifier = BAC_its_electric_state }
		}
	}
}

shared_focus = {
	id = BAC_COC_eco_m4c
	icon = GFX_goal_bac_kirin_ichiban_shibori
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_eco_head
	x = -2
	y = 4
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_eco_m3c
		focus = BAC_COC_eco_c3
	}
	available = {
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_m4c"
		add_political_power = 33
		add_stability = 0.03
		every_core_state = {
			limit = {
				is_fully_controlled_by = ROOT
				free_building_slots = {
					building = industrial_complex
					size > 0
					include_locked = yes
				}
			}
			random_select_amount = 5
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		custom_effect_tooltip = KIR_line_break
		increase_society_development_gradual = yes
		decrease_poverty = yes
		bac_WPU_small_effect = yes
	}
}


shared_focus = { #shdzz
	id = BAC_COC_eco_c4
	icon = GFX_goal_zebra_agriculture
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_eco_head
	x = -4
	y = 4
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_eco_c3
	}
	available = {	
		NOT = { has_idea = BAC_famine_timed }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_eco_c4"
		swap_ideas = {
			remove_idea = BAC_COC_eco_c3_idea
			add_idea = BAC_COC_eco_c4_idea
		}
		decrease_poverty = yes
		increase_society_development_gradual = yes
		bac_WPU_large_effect = yes
	}
}

shared_focus = { #Military Affairs
	id = BAC_COC_mil_head
    icon = {
        trigger = { has_completed_focus = BAC_COC_mil_head }
        value = GFX_goal_bac_firethorn
    }
	icon = GFX_goal_KIR_ranks
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_m1
	x = 6
	y = 3
	prerequisite = {
		focus = BAC_COC_true_commonalty
		focus = BAC_COC_m1
	}
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_head"
		hidden_effect = {
			KIR_firethorn = {
				unit_leader_event = {
					id = baccocc.12
					hours = 3
					random_hours = 33
				}
				unit_leader_event = {
					id = baccocc.15
					days = 15
					hours = 15
				}
				unit_leader_event = {
					id = baccocc.13
					days = 99
					hours = 10
				}
			}
			remove_dynamic_modifier = { modifier = COC_peasant_army }
			add_dynamic_modifier = { modifier = BAC_PaPA }
			clear_variable = COC_2_var
			add_to_variable = { COC_1_var = 0.03 }
		}
		effect_tooltip = {
			swap_ideas = {
				remove_idea = BAC_COC_peasant_dummy
				add_idea = BAC_PaPA_dummy1
			}
			KIC_ember_glow = { unit_leader_event = baccocc.12 }
		}
		custom_effect_tooltip = BAC_COC_mil_head_tt
	}
}

shared_focus = {
	id = BAC_COC_mil_h1
	icon = GFX_goal_KIR_kirins_rampant #GFX_goal_cry_eqs_hat
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = -1
	y = 1
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_mil_head
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_h1"
		if = {
			limit = { bac_has_researched_all_kirin_techs = no }
			add_tech_bonus = {
				name = race_tech_bonus
				bonus = 0.33
				uses = 3
				category = race_tech
			}
		}
		else = { add_war_support = 0.03 }
		add_to_variable = { BAC_PaPA_h1 = 0.09 }
		effect_tooltip = {
			swap_ideas = {
				remove_idea = BAC_PaPA_dummy
				add_idea = BAC_PaPA_dummy_h1
			}
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = democratic
			popularity = -0.03
		}
		bac_WPU_small_effect = yes
	}
}

shared_focus = {
	id = BAC_COC_mil_c1
	icon = GFX_goal_KIR_battle_rifle
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = 1
	y = 1
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_mil_head
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_c1"
		add_tech_bonus = {
			name = BAC_COC_mil_c1
			bonus = 0.33
			uses = 3
			category = infantry_weapons
		}
		add_to_variable = { COC_1_var = 0.03 }
		add_to_variable = { COC_5_var = 0.05 }
		add_to_variable = { COC_6_var = 0.05 }
		effect_tooltip = {
			swap_ideas = {
				remove_idea = BAC_PaPA_dummy
				add_idea = BAC_PaPA_dummy_c1
			}
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = communism
			popularity = -0.03
		}
		bac_COT_small_effect = yes
	}
}


shared_focus = {
	id = BAC_COC_mil_m2
	icon = GFX_HIP_chess #GFX_goal_KIR_sergeant
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = 0
	y = 2
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_mil_h1
		focus = BAC_COC_mil_c1
	}
	available = {
		has_war_support > 0.33
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_m2"
		army_experience = 33
		add_to_variable = { BAC_PaPA_m2 = 0.09 }
		add_to_variable = { COC_5_var = 0.05 }
		add_to_variable = { COC_6_var = 0.05 }
		effect_tooltip = {
			swap_ideas = {
				remove_idea = BAC_PaPA_dummy
				add_idea = BAC_PaPA_dummy_m2
			}
		}
		every_unit_leader = {
			add_planning = 1
		}
	}
}
shared_focus = { #BAC_COC_mil_h2
	id = BAC_COC_mil_h2
	icon = GFX_goal_KIR_cannon_helmet
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = -2
	y = 2
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_mil_h1
	}
	available = {
		if = {
			limit = { has_idea = bac_verdant_accord_2_idea }
			has_idea = bac_verdant_accord_2_idea
		}
		else = { has_idea = bac_verdant_accord_idea }
		power_balance_value = {
			id = BAC_commonalty_bop
			value > 0.099
		}
		if = {
			limit = { country_exists = event_target:solar_empire }
			if = {
				limit = { has_completed_focus = BAC_COC_pol_h2 }
				fascism > 0.09
			}
			else = { has_completed_focus = BAC_COC_pol_h2 }
			event_target:solar_empire = {
				is_subject = no
				surrender_progress < 0.1
				NOT = {
					has_war_with = ROOT
				}
				if = {
					limit = {
						ROOT = { is_ai = no }
					}
					has_opinion = { target = ROOT value > 99 }
				}
			}
		}
		else = {
			event_target:equestria = {
				exists = yes
				is_subject = no
				surrender_progress < 0.1
				NOT = {
					has_war_with = ROOT
				}
				if = {
					limit = {
						ROOT = { is_ai = no }
					}
					has_opinion = { target = ROOT value > 99 }
				}
			}
		}
	}
	bypass = {
		event_target:equestria = { exists = no }
		event_target:solar_empire = { exists = no }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_h2"
		add_to_variable = { COC_1_var = 0.03 }
		effect_tooltip = {
			swap_ideas = {
				remove_idea = BAC_PaPA_dummy
				add_idea = BAC_PaPA_dummy_COC_1_var
			}
		}
		set_country_flag = BAC_star_energy_zeb_available
		set_country_flag = BAC_fillydelphia_arms_available
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			custom_effect_tooltip = available_mio_tt
			show_mio_tooltip = BAC_star_energy_zeb_organization
			mio:BAC_star_energy_zeb_organization = {
				add_mio_size = 1
				add_mio_funds = 333
				set_mio_flag = cocc_cot_mio_flag
			}
			custom_effect_tooltip = available_mio_tt
			show_mio_tooltip = BAC_fillydelphia_arms_organization
			mio:BAC_fillydelphia_arms_organization = {
				add_mio_size = 1
				add_mio_funds = 333
				set_mio_flag = cocc_cot_mio_flag
			}
			custom_effect_tooltip = BAC_mio_size_up_prefix
			custom_effect_tooltip = BAC_mio_size_up_cot
		}
		else = {
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = BAC_star_energy_zeb
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = BAC_fillydelphia_arms
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = democratic
			popularity = -0.03
		}
		bac_WPU_small_effect = yes
	}
}
shared_focus = {
	id = BAC_COC_mil_c2
	icon = GFX_goal_KIR_companion
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = 2
	y = 2
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_mil_c1
	}
	available = {
		power_balance_value = {
			id = BAC_commonalty_bop
			value < -0.099
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_c2"
		add_to_variable = { COC_1_var = 0.03 }
		subtract_from_variable = { COC_4_var = 0.15 }
		add_tech_bonus = {
			name = BAC_COC_mil_c2
			bonus = 0.33
			uses = 1
			category = hospital_tech
		}
		swap_ideas = {
			remove_idea = BAC_PaPA_dummy
			add_idea = BAC_PaPA_dummy_c2
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = communism
			popularity = -0.03
		}
		bac_COT_small_effect = yes
	}
}

shared_focus = { #Flying Commonkirin
	id = BAC_COC_mil_air
	icon = GFX_goal_KIR_flyby
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = -2
	y = 0
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_true_commonalty
		focus = BAC_COC_m1
	}
	available = {
		has_completed_focus = BAC_COC_mil_head
		does_not_have_pre_industrial_society = yes
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_air"
		set_country_flag = KIR_DM_aerospace_engineering_available
		set_country_flag = KIC_aerospace_engineer_available
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			custom_effect_tooltip = available_mio_tt
			show_mio_tooltip = KIR_DM_aerospace_engineering_organization
			mio:KIR_DM_aerospace_engineering_organization = {
				add_mio_size = 1
				add_mio_funds = 333
				set_mio_flag = cocc_cot_mio_flag
			}
			custom_effect_tooltip = BAC_mio_size_up_prefix
			custom_effect_tooltip = BAC_mio_size_up_cot
			custom_effect_tooltip = available_mio_tt
			show_mio_tooltip = KIC_aerospace_engineer_organization
			mio:KIC_aerospace_engineer_organization = {
				add_mio_size = 1
				add_mio_funds = 333
				set_mio_flag = cocc_wpu_mio_flag
			}
			custom_effect_tooltip = BAC_mio_size_up_prefix
			custom_effect_tooltip = BAC_mio_size_up_wpu

		}
		else = {
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = KIR_DM_aerospace_engineering
			custom_effect_tooltip = available_designer_individual
			show_ideas_tooltip = KIC_aerospace_engineer
		}
	}
}
shared_focus = { # Beyond The Riverine Navy
	id = BAC_COC_mil_navy
	icon = GFX_goal_KIR_junk_of_war
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = -4
	y = 0
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_true_commonalty
		focus = BAC_COC_m1
	}
	available = {
		has_completed_focus = BAC_COC_mil_head
		does_not_have_pre_industrial_society = yes
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_navy"
		add_tech_bonus = {
			name = BAC_COC_mil_navy
			bonus = 1.0
			uses = 3
			category = naval_equipment
		}
		every_possible_country = {
		limit = { has_character = KIR_navy_chief_1 }
			KIR_navy_chief_1 = {
				set_nationality = ROOT
				add_naval_commander_role = {
					skill = 1
					attack_skill = 1
					defense_skill = 1
					maneuvering_skill = 1
					coordination_skill = 1
					traits = { naval_liason kirin_race_trait peasant_sympathiser }
				}
				custom_effect_tooltip = BAC_river_song_stats_tp
			}
			hidden_effect = {
				#remove_unit_leader_role = yes ## THIS LINE MOVED TO kirin_council.303 EVENT, to avoid error spam
			}
			custom_effect_tooltip = available_chief_of_navy_tt
			show_ideas_tooltip = KIR_navy_chief_1
		}
		set_country_flag = KIR_DM_maritime_systems_available
		set_country_flag = KIC_deer_comrade_available
		custom_effect_tooltip = KIR_line_break
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			custom_effect_tooltip = available_mio_tt
			show_mio_tooltip = KIR_DM_maritime_systems_organization
			mio:KIR_DM_maritime_systems_organization = {
				add_mio_size = 1
				add_mio_funds = 333
				set_mio_flag = cocc_cot_mio_flag
			}
			custom_effect_tooltip = BAC_mio_size_up_prefix
			custom_effect_tooltip = BAC_mio_size_up_cot

			custom_effect_tooltip = available_mio_tt
			show_mio_tooltip = KIC_deer_comrade_organization
			mio:KIC_deer_comrade_organization = {
				add_mio_size = 1
				add_mio_funds = 333
				set_mio_flag = cocc_wpu_mio_flag
			}
			custom_effect_tooltip = BAC_mio_size_up_prefix
			custom_effect_tooltip = BAC_mio_size_up_wpu

		}
		else = {
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = KIR_DM_maritime_systems
			custom_effect_tooltip = available_designer_individual
			show_ideas_tooltip = KIC_deer_comrade
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = democratic
			popularity = -0.03
		}
		bac_WPU_medium_effect = yes
	}
}
shared_focus = {
	id = BAC_COC_mil_navalair
	icon = GFX_goal_KIR_air
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = -3
	y = 1
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_mil_navy
	}
	prerequisite = {
		focus = BAC_COC_mil_air
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_navalair"
		if = {
			limit = {
				has_dlc = "By Blood Alone"
			}
			add_tech_bonus = {
				name = BAC_COC_mil_navalair
				bonus = 1
				uses = 3
				category = mio_cat_all_naval_bomber_and_modules
			}
		}
		else = {
			add_tech_bonus = {
				name = BAC_COC_mil_navalair
				bonus = 1
				uses = 3
				category = naval_bomber
			}
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = democratic
			popularity = -0.03
		}
		bac_WPU_medium_effect = yes
	}
}

shared_focus = { #spearhead thing
	id = BAC_COC_mil_h3
	icon = GFX_goal_KIR_flotilla
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = -3
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_mil_h2
	}
	prerequisite = {
		focus = BAC_COC_mil_navalair
		focus = BAC_COC_m1
	}
	available = {
		power_balance_value = {
			id = BAC_commonalty_bop
			value > 0.099
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_h3"
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			add_doctrine_cost_reduction = {
				name = BAC_COC_mil_h3
				cost_reduction = 0.33
				uses = 3
				category = cat_marines_doctrine
			}
			add_tech_bonus = {
				name = BAC_COC_mil_h3
				bonus = 0.33
				uses = 3
				category = marine_tech
				category = tp_tech
			}
		}
		else = {
			add_tech_bonus = {
				name = BAC_COC_mil_h3
				bonus = 1.0
				uses = 3
				category = marine_tech
				category = tp_tech
			}
		}
		set_variable = { BAC_PaPA_h3 = 0.03 }
		effect_tooltip = {
			swap_ideas = {
				remove_idea = BAC_PaPA_dummy
				add_idea = BAC_PaPA_dummy_h3
			}
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = democratic
			popularity = -0.03
		}
		bac_WPU_medium_effect = yes
	}
}



shared_focus = { #heavy industry ig?
	id = BAC_COC_mil_m3h
	icon = GFX_goal_KIR_factory
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = -1
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_mil_m2
		focus = BAC_COC_mil_h2
	}
	available = {
		has_war_support > 0.5
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_m3h"
		every_core_state = {
			limit = {
				is_fully_controlled_by = ROOT
				free_building_slots = {
					building = arms_factory
					size > 0
					include_locked = yes
				}
			}
			random_select_amount = 3
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		swap_ideas = {
			remove_idea = BAC_COC_eco_h1_idea
			add_idea = BAC_COC_eco_h1_upgraded_idea
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = democratic
			popularity = -0.03
		}
		bac_WPU_small_effect = yes
	}
}

shared_focus = {
	id = BAC_COC_mil_m3c
	icon = GFX_goal_KIR_pointing_hoof
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = 1
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_mil_h2
		focus = BAC_COC_mil_c2
	}
	available = {
		has_war_support > 0.5
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_m3c"
		if = {
			limit = { has_idea = extensive_conscription }
			swap_ideas = {
				remove_idea = extensive_conscription
				add_idea = communal_militias
			}
		}
		else_if = {
			limit = { has_idea = service_by_requirement }
			swap_ideas = {
				remove_idea = service_by_requirement
				add_idea = communal_militias
			}
		}
		else_if = {
			limit = { has_idea = all_adults_serve }
			swap_ideas = {
				remove_idea = all_adults_serve
				add_idea = communal_militias
			}
		}
		else_if = {
			limit = { has_idea = scraping_the_barrel }
			swap_ideas = {
				remove_idea = scraping_the_barrel
				add_idea = communal_militias
			}
		}
		else_if = {
			limit = { has_idea = volunteer_only }
			swap_ideas = {
				remove_idea = volunteer_only
				add_idea = communal_militias
			}
		}
		else_if = {
			limit = { has_idea = limited_conscription }
			swap_ideas = {
				remove_idea = limited_conscription
				add_idea = communal_militias
			}
		}
		else = {
			swap_ideas = {
				remove_idea = disarmed_nation
				add_idea = communal_militias
			}
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = communism
			popularity = -0.03
		}
		bac_COT_medium_effect = yes
	}
}

shared_focus = {
	id = BAC_COC_mil_c3
	icon = GFX_goal_KIR_rocketeer
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = 3
	y = 3
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_mil_c2
	}
	available = {
		OR = {
			any_other_country = {
				is_major = yes
				has_opinion_modifier = commonalty_embassy
			}
			has_completed_focus = BAC_COC_applied_science
		}
		power_balance_value = {
			id = BAC_commonalty_bop
			value < -0.099
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_c3"
		if = {
			limit = { has_completed_focus = BAC_COC_applied_science }
			add_equipment_to_stockpile = {
				type = rocket_artillery_equipment
				amount = 300
			}
			add_equipment_to_stockpile = {
				type = anti_air_equipment
				amount = 300
			}
			add_equipment_to_stockpile = {
				type = anti_tank_equipment
				amount = 300
			}
		}
		else = {
			random_other_country = {
				limit = {
					is_major = yes
					has_opinion_modifier = commonalty_embassy
				}
				ROOT = {
					add_equipment_to_stockpile = {
						type = rocket_artillery_equipment
						amount = 300
						producer = PREV
					}
					add_equipment_to_stockpile = {
						type = anti_air_equipment
						amount = 300
						producer = PREV
					}
					add_equipment_to_stockpile = {
						type = anti_tank_equipment
						amount = 300
						producer = PREV
					}
				}
			}
		}
		add_tech_bonus = {
			name = BAC_COC_mil_c3
			bonus = 1.0
			uses = 3
			category = cat_anti_tank
			category = cat_anti_air
			category = rocketry
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = communism
			popularity = -0.03
		}
		bac_COT_medium_effect = yes
	}
}
shared_focus = {
	id = BAC_COC_mil_h4
	icon = {
		trigger = { country_exists = event_target:solar_empire }
		value = GFX_goal_SOL_batnation
	}
	icon = GFX_PLB_HY_CELESTIA
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = -4
	y = 4
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_mil_h3
	}
	available = {
		power_balance_value = {
			id = BAC_commonalty_bop
			value > 0.33
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_h4"
		subtract_from_variable = { COC_9_var = 0.04 }
		add_to_variable = { BAC_PaPA_h3 = 0.06 }
		add_war_support = 0.09
		effect_tooltip = {
			swap_ideas = {
				remove_idea = BAC_PaPA_dummy
				add_idea = BAC_PaPA_dummy_h4
			}
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = democratic
			popularity = -0.03
		}
		bac_WPU_large_effect = yes
	}
}
shared_focus = {
	id = BAC_COC_mil_m4h
	icon = GFX_goal_KIR_panzer
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = -2
	y = 4
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_mil_m3h
		focus = BAC_COC_mil_h3
	}
	available = {
		power_balance_value = {
			id = BAC_commonalty_bop
			value > 0.099
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_m4h"
		add_to_variable = { COC_1_var = 0.03 }
		effect_tooltip = {
			swap_ideas = {
				remove_idea = BAC_PaPA_dummy
				add_idea = BAC_PaPA_dummy_COC_1_var
			}
		}
		add_tech_bonus = {
			name = BAC_COC_mil_m4h
			bonus = 1
			uses = 3
			category = armor
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = democratic
			popularity = -0.03
		}
		bac_WPU_small_effect = yes
	}
}

shared_focus = {
	id = BAC_COC_mil_m4m
	icon = GFX_goal_KIR_KIC_military
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = 0
	y = 4
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_mil_m3h
		focus = BAC_COC_mil_m3c
	}
	available = {
		has_war_support > 0.5
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_m4m"
		add_popularity = {
			ideology = neutrality
			popularity = 0.03
		}
		add_to_variable = { COC_5_var = 0.09 }
		add_to_variable = { COC_6_var = 0.09 }
		set_variable = { BAC_PaPA_m4 = 0.09 }
		effect_tooltip = {
			swap_ideas = {
				remove_idea = BAC_PaPA_dummy
				add_idea = BAC_PaPA_dummy_m4
			}
		}
	}
}

shared_focus = {
	id = BAC_COC_mil_m4c
	icon = GFX_goal_KIR_deaths_head
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = 2
	y = 4
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_mil_m3c
		focus = BAC_COC_mil_c3
	}
	available = {
		NOT = { has_offensive_war = yes }
		has_completed_focus = BAC_COC_kindling_4a
		power_balance_value = {
			id = BAC_commonalty_bop
			value < -0.099
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_m4c"
		set_variable = {
			BAC_PaPA_c4 = 0.3
		}
		add_to_variable = { GuerillaOrgDmgVar = 60 }
		add_to_variable = { GuerillaStrDmgVar = 100 }
		add_war_support = 0.09
		effect_tooltip = {
			swap_ideas = {
				remove_idea = BAC_PaPA_dummy
				add_idea = BAC_PaPA_dummy_c4
			}
		}
		custom_effect_tooltip = COC_event_318_a_tt
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = communism
			popularity = -0.03
		}
		bac_COT_small_effect = yes
	}
}

shared_focus = {
	id = BAC_COC_mil_c4
	icon = GFX_goal_magical_nukes
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_mil_head
	x = 4
	y = 4
	allow_branch = {
		check_variable = { baccocc_start_foci_completed > 9 }
	}
	prerequisite = {
		focus = BAC_COC_mil_c3
	}
	available = {
		has_completed_focus = BAC_COC_applied_science
		power_balance_value = {
			id = BAC_commonalty_bop
			value < -0.33
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_mil_c4"
		add_to_variable = { COC_1_var = 0.03 }
		effect_tooltip = {
			swap_ideas = {
				remove_idea = BAC_PaPA_dummy
				add_idea = BAC_PaPA_dummy_COC_1_var
			}
		}
		add_tech_bonus = {
			name = BAC_COC_mil_c4
			bonus = 3.0
			uses = 3
			category = nuclear
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = communism
			popularity = -0.03
		}
		bac_COT_large_effect = yes
	}
}

shared_focus = {
	id = BAC_COC_sekrit_war_committee
	icon = GFX_goal_bac_ember_glow
	cost = 4.8
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_m1
	x = 0
	y = 10

	allow_branch = {
		has_country_flag = COC_war_committee_flag
	}
	bypass = {
		if = {
			limit = {
				has_game_rule = {
					rule = allow_faction
					option = BLOCKED
				}
			}
			is_in_faction = yes
		}
		else = {
			hidden_trigger = {
				always = no
			}
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_sekrit_war_committee"
		set_rule = { can_create_factions = yes }
		if = {
			limit = { is_in_faction = no }
			create_faction = BAC_commonalty_faction
		}
		else = {
			custom_effect_tooltip = BAC_COC_sekrit_war_committee_tt
			effect_tooltip = {
				create_faction = BAC_commonalty_faction
			}
		}
	}
}


shared_focus = { #March to Old Marches
	id = BAC_COC_war_zaikiria
	icon = GFX_goal_chn_kirin
	cost = 4.8
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_sekrit_war_committee
	x = 2
	y = 1
	prerequisite = {
		focus = BAC_COC_sekrit_war_committee
		focus = BAC_COC_m1
	}
	allow_branch = {
		has_country_flag = COC_war_committee_flag
	}

	available = {
		if = {
			limit = { is_ai = no }
			has_war_support > 0.5
		}
		OR = {
			NOT = { has_country_flag = BAC_COC_commonalty_war_enacted_flag }
			has_country_flag = {
				flag = BAC_COC_commonalty_war_enacted_flag
				days > 90
			}
			custom_trigger_tooltip = {
				tooltip = BAC_COC_commonalty_war_days_tt
				has_country_flag = {
					flag = BAC_COC_commonalty_war_enacted_flag
					days > 90
				}
			}
		}
	}
	bypass = {
		# all_other_country = {
		# 	OR = {
		# 		tag = KXN
		# 		tag = NVA
		# 		tag = KHM
		# 	}
		# 	bac_all_original_cores_controlled_by_ROOT_or_ally = yes
		# }
		KXN = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		NVA = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		KHM = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
	}
	will_lead_to_war_with = KXN
	will_lead_to_war_with = NVA
	will_lead_to_war_with = KHM
	select_effect = {
		every_other_country = {
			limit = {
				any_controlled_state = {
					OR = {
						is_in_array = { KXN.original_cores = THIS }
						is_in_array = { NVA.original_cores = THIS }
						is_in_array = { KHM.original_cores = THIS }
					}
				}
			}
			add_ai_strategy = {
				type = prepare_for_war
				id = ROOT
				value = 1000
			}
		}
		every_state = {
			limit = {
				OR = {
					is_in_array = { KXN.original_cores = THIS }
					is_in_array = { NVA.original_cores = THIS }
					is_in_array = { KHM.original_cores = THIS }
				}
			}
			add_claim_by = ROOT
		}
		clr_country_flag = BAC_COC_commonalty_war_enacted_flag
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_war_zaikiria"
		custom_effect_tooltip = bac_national_focus_active_tt
		effect_tooltip = { 1058 = { add_claim_by = ROOT } }
		custom_effect_tooltip = national_spirit_active2
		1058 = {
			hidden_effect = { remove_claim_by = ROOT }
			add_core_of = ROOT
		}
		every_other_country = {
			limit = {
				any_controlled_state = {
					OR = {
						is_in_array = { KXN.original_cores = THIS }
						is_in_array = { NVA.original_cores = THIS }
						is_in_array = { KHM.original_cores = THIS }
						# state = 1054 #Lotus Crown
						# state = 1058 #Blossom
						# state = 1083 #Cassia Reach
						# state = 1085 #Razorgrain Frontier
					}
				}
			}
			ROOT = {
				hidden_effect = {
					create_wargoal = {
						type = annex_everything
						target = PREV
					}
				}
				custom_effect_tooltip = KIR_republic_postwar_focus_XY_WG_tt
			}
		}
		set_country_flag = BAC_COC_commonalty_war_enacted_flag
	}
}

shared_focus = { #Attack on barbarian lands
	id = BAC_COC_war_barbarian
	icon = GFX_goal_KIR_kaiser #GFX_goal_GRF_troubles_begin
	cost = 4.8
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_sekrit_war_committee
	x = 5
	y = 2
	prerequisite = {
		focus = BAC_COC_sekrit_war_committee
		focus = BAC_COC_m1
	}
	allow_branch = {
		has_country_flag = COC_war_committee_flag
	}
	available = {
		has_war = no
		if = {
			limit = { is_ai = no }
			has_war_support > 0.66
		}
		OR = {
			NOT = { has_country_flag = BAC_COC_commonalty_war_enacted_flag }
			has_country_flag = {
				flag = BAC_COC_commonalty_war_enacted_flag
				days > 90
			}
			custom_trigger_tooltip = {
				tooltip = BAC_COC_commonalty_war_days_tt
				has_country_flag = {
					flag = BAC_COC_commonalty_war_enacted_flag
					days > 90
				}
			}
		}
	}
	will_lead_to_war_with = ROA
	will_lead_to_war_with = TSV
	will_lead_to_war_with = GFS
	will_lead_to_war_with = ZLU
	will_lead_to_war_with = ZOO
	select_effect = {
		every_other_country = {
			limit = {
				any_controlled_state = {
					OR = {
						is_in_array = { ROA.original_cores = THIS }
						is_in_array = { TSV.original_cores = THIS }
						is_in_array = { GFS.original_cores = THIS }
						is_in_array = { ZLU.original_cores = THIS }
						is_in_array = { ZOO.original_cores = THIS }
						# state = 909
						# state = 911
						# state = 922
						# state = 1132
						# state = 1135
					}
				}
			}
			add_ai_strategy = {
				type = prepare_for_war
				id = ROOT
				value = 1000
			}
		}
		clr_country_flag = BAC_COC_commonalty_war_enacted_flag
	}
	bypass = {
		# all_other_country = {
		# 	OR = {
		# 		tag = ROA
		# 		tag = TSV
		# 		tag = GFS
		# 		tag = ZLU
		# 		tag = ZOO
		# 	}
		# 	bac_all_original_cores_controlled_by_ROOT_or_ally = yes
		# }
		ROA = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		TSV = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		GFS = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		ZLU = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		ZOO = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_war_barbarian"
		every_other_country = {
			limit = {
				any_controlled_state = {
					OR = {
						is_in_array = { ROA.original_cores = THIS }
						is_in_array = { TSV.original_cores = THIS }
						is_in_array = { GFS.original_cores = THIS }
						is_in_array = { ZLU.original_cores = THIS }
						is_in_array = { ZOO.original_cores = THIS }
						# state = 909
						# state = 911
						# state = 922
						# state = 1132
						# state = 1135
					}
				}
			}
			ROOT = {
				hidden_effect = {
					create_wargoal = {
						type = annex_everything
						target = PREV
					}
				}
				custom_effect_tooltip = KIR_republic_postwar_focus_XY_WG_tt
			}
		}
		set_country_flag = BAC_COC_commonalty_war_enacted_flag
	}
}
shared_focus = { #deer war
	id = BAC_COC_war_deer
	icon = GFX_goal_chn_kill_the_deer
	cost = 4.8
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_sekrit_war_committee
	x = -5
	y = 2
	prerequisite = {
		focus = BAC_COC_sekrit_war_committee
		focus = BAC_COC_m1
	}
	allow_branch = {
		has_country_flag = COC_war_committee_flag
	}
	available = {
		has_war = no
		if = {
			limit = { is_ai = no }
			has_war_support > 0.66
		}
		OR = {
			NOT = { has_country_flag = BAC_COC_commonalty_war_enacted_flag }
			has_country_flag = {
				flag = BAC_COC_commonalty_war_enacted_flag
				days > 90
			}
			custom_trigger_tooltip = {
				tooltip = BAC_COC_commonalty_war_days_tt
				has_country_flag = {
					flag = BAC_COC_commonalty_war_enacted_flag
					days > 90
				}
			}
		}
		has_global_flag = HIN_wars_over
	}
	bypass = {
		# all_other_country = {
		# 	OR = {
		# 		tag = BRS
		# 		tag = SAM
		# 		tag = HIN
		# 		tag = CTL
		# 	}
		# 	bac_all_original_cores_controlled_by_ROOT_or_ally = yes
		# }
		BRS = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		SAM = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		HIN = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		CTL = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
	}
	will_lead_to_war_with = BRS
	will_lead_to_war_with = SAM
	will_lead_to_war_with = HIN
	will_lead_to_war_with = CTL
	select_effect = {
		every_other_country = {
			limit = {
				any_controlled_state = {
					OR = {
						is_in_array = { BRS.original_cores = THIS }
						is_in_array = { SAM.original_cores = THIS }
						is_in_array = { HIN.original_cores = THIS }
						is_in_array = { CTL.original_cores = THIS }
						# state = 1097 #BRS
						# state = 1163 #SAM
						# state = 1171 #HIN
						# state = 1176 #CTL
					}
				}
			}
			country_event = kirin_utility.55
		}
		clr_country_flag = BAC_COC_commonalty_war_enacted_flag
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_war_deer"
		every_other_country = {
			limit = {
				any_controlled_state = {
					OR = {
						is_in_array = { BRS.original_cores = THIS }
						is_in_array = { SAM.original_cores = THIS }
						is_in_array = { HIN.original_cores = THIS }
						is_in_array = { CTL.original_cores = THIS }
						# state = 1097 #BRS
						# state = 1163 #SAM
						# state = 1171 #HIN
						# state = 1176 #CTL
					}
				}
				OR = {
					has_government = fascism
					has_government = neutrality
					has_country_flag = CTL_hira_in_power_smh
					has_country_flag = CTL_ivar_in_power_smh
				}
			}
			ROOT = {
				hidden_effect = {
					create_wargoal = {
						type = annex_everything
						target = PREV
					}
				}
				custom_effect_tooltip = KIR_republic_postwar_focus_XY_WG_tt
			}
		}
		every_other_country = {
			limit = {
				OR = {
					original_tag = BRS
					original_tag = SAM
					original_tag = HIN
					original_tag = CTL
				}
				NOT = {
					has_government = fascism
					has_government = neutrality
					has_country_flag = CTL_hira_in_power_smh
					has_country_flag = CTL_ivar_in_power_smh
				}
			}
			country_event = baccocc.146
			save_global_event_target_as = BAC_hindian_ally
		}
		set_country_flag = BAC_COC_commonalty_war_enacted_flag
	}
}
shared_focus = {
	id = BAC_COC_war_taungpau
	icon = GFX_goal_KIR_pagoda
	cost = 4.8
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_sekrit_war_committee
	x = -2
	y = 1
	prerequisite = {
		focus = BAC_COC_sekrit_war_committee
		focus = BAC_COC_m1
	}
	allow_branch = {
		has_country_flag = COC_war_committee_flag
	}

	available = {
		if = {
			limit = { is_ai = no }
			has_war_support > 0.5
		}
		OR = {
			NOT = { has_country_flag = BAC_COC_commonalty_war_enacted_flag }
			has_country_flag = {
				flag = BAC_COC_commonalty_war_enacted_flag
				days > 90
			}
			custom_trigger_tooltip = {
				tooltip = BAC_COC_commonalty_war_days_tt
				has_country_flag = {
					flag = BAC_COC_commonalty_war_enacted_flag
					days > 90
				}
			}
		}
	}
	will_lead_to_war_with = GAZ
	select_effect = {
		every_other_country = {
			limit = {
				any_controlled_state = {
					is_in_array = { GAZ.original_cores = THIS }
					#OR = {
						#state = 924 #baganta
					#}
				}
			}
			add_ai_strategy = {
				type = prepare_for_war
				id = ROOT
				value = 1000
			}
		}
		clr_country_flag = BAC_COC_commonalty_war_enacted_flag
	}
	bypass = {
		GAZ = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_war_taungpau"
		ROOT = {
			create_wargoal = {
				type = annex_everything
				target = 924.owner
			}
		}
		set_country_flag = BAC_COC_commonalty_war_enacted_flag
	}
}

shared_focus = {
	id = BAC_COC_friend_zaikiria
	icon = GFX_goal_golden_lotus
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_war_zaikiria
	x = 1
	y = 1
	allow_branch = {
		has_country_flag = COC_war_committee_flag
	}
	mutually_exclusive = {
		focus = BAC_COC_convert_zaikiria
	}
	prerequisite = {
		focus = BAC_COC_war_zaikiria
		focus = BAC_COC_m1
	}
	available = {
		# all_other_country = {
		# 	OR = {
		# 		tag = KXN
		# 		tag = NVA
		# 		tag = KHM
		# 	}
		# 	bac_all_original_cores_controlled_by_ROOT_or_ally = yes
		# }
		KXN = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		NVA = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		KHM = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_friend_zaikiria"
		set_country_flag = commonalty_solved_zaikiria
		#custom_effect_tooltip = KIR_line_break
		if = {
			limit = {
				OR = {
					all_controlled_state = {
						NOT = {
							is_in_array = { KXN.original_cores = THIS }
							is_in_array = { NVA.original_cores = THIS }
							is_in_array = { KHM.original_cores = THIS }
						}
					}
					has_country_flag = commonalty_solved_zaikiria
				}
			}
			effect_tooltip = { add_dynamic_modifier = { modifier = BAC_autonomy_state } }
		}
		else = {
			every_controlled_state = {
				limit = {
					OR = {
						is_in_array = { KXN.original_cores = THIS }
						is_in_array = { NVA.original_cores = THIS }
						is_in_array = { KHM.original_cores = THIS }
					}
					NOT = {
						is_core_of = ROOT
					}
				}
				add_core_of = ROOT
				add_dynamic_modifier = { modifier = BAC_autonomy_state }
			}
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = communism
			popularity = 0.03
		}
		bac_WPU_small_effect = yes
	}
}

shared_focus = {
	id = BAC_COC_convert_zaikiria
	icon = GFX_goal_rose_lotus
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_war_zaikiria
	x = -1
	y = 1
	allow_branch = {
		has_country_flag = COC_war_committee_flag
	}
	mutually_exclusive = {
		focus = BAC_COC_friend_zaikiria
	}
	prerequisite = {
		focus = BAC_COC_war_zaikiria
		focus = BAC_COC_m1
	}
	available = {
		# all_other_country = {
		# 	OR = {
		# 		tag = KXN
		# 		tag = NVA
		# 		tag = KHM
		# 	}
		# 	bac_all_original_cores_controlled_by_ROOT_or_ally = yes
		# }
		KXN = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		NVA = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		KHM = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_convert_zaikiria"
		add_political_power = -99
		set_country_flag = commonalty_solved_zaikiria
		every_possible_country = {
			limit = {
				OR = {
					tag = KXN
					tag = NVA
					tag = KHM
				}
			}
			add_to_ROOT_potential_cores = yes
		}
		custom_effect_tooltip = KIR_line_break
		bac_eqs_popularity = yes
		bac_COT_small_effect = yes
	}
}
shared_focus = {
	id = BAC_COC_friend_taungpau
	icon = GFX_goal_KIR_foals_breath
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_war_taungpau
	x = 1
	y = 1
	allow_branch = {
		has_country_flag = COC_war_committee_flag
	}
	mutually_exclusive = {
		focus = BAC_COC_convert_taungpau
	}
	prerequisite = {
		focus = BAC_COC_war_taungpau
		focus = BAC_COC_m1
	}
	available = {
		GAZ = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_friend_taungpau"
		set_country_flag = commonalty_solved_taungpau
		if = {
			limit = {
				all_controlled_state = {
					NOT = {
						is_in_array = { GAZ.original_cores = THIS }
					}
				}
			}
			effect_tooltip = { add_dynamic_modifier = { modifier = BAC_autonomy_state } }
		}
		every_controlled_state = {
			limit = {
				#OR = {
					is_in_array = { GAZ.original_cores = THIS }
				#}
			}
			add_core_of = ROOT
			add_dynamic_modifier = { modifier = BAC_autonomy_state }
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = communism
			popularity = 0.03
		}
		bac_WPU_small_effect = yes
	}
}

shared_focus = {
	id = BAC_COC_convert_taungpau
	icon = GFX_goal_solar_church
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_war_taungpau
	x = -1
	y = 1
	allow_branch = {
		has_country_flag = COC_war_committee_flag
	}
	mutually_exclusive = {
		focus = BAC_COC_friend_taungpau
	}
	prerequisite = {
		focus = BAC_COC_war_taungpau
		focus = BAC_COC_m1
	}
	available = {
		GAZ = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_convert_taungpau"
		set_country_flag = commonalty_solved_taungpau
		add_political_power = -49
		GAZ = { add_to_ROOT_potential_cores = yes }
		custom_effect_tooltip = KIR_line_break
		bac_eqs_popularity = yes
		bac_COT_small_effect = yes
	}
}
shared_focus = {
	id = BAC_COC_friend_barbarian
	icon = GFX_goal_KIR_zebra #GFX_goal_UESR_TNO_justice #GFX_goal_AF24_through_the_clearings
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_war_barbarian
	x = 1
	y = 1
	allow_branch = {
		has_country_flag = COC_war_committee_flag
	}
	mutually_exclusive = {
		focus = BAC_COC_convert_barbarian
	}
	prerequisite = {
		focus = BAC_COC_war_barbarian
		focus = BAC_COC_m1
	}
	available = {
		# all_other_country = {
		# 	OR = {
		# 		tag = ROA
		# 		tag = TSV
		# 		tag = GFS
		# 		tag = ZLU
		# 		tag = ZOO
		# 	}
		# 	bac_all_original_cores_controlled_by_ROOT_or_ally = yes
		# }
		ROA = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		TSV = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		GFS = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		ZLU = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		ZOO = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_friend_barbarian"
		set_country_flag = commonalty_solved_barbarian
		add_political_power = -99
		every_possible_country = {
			limit = {
				OR = {
					tag = ROA
					tag = TSV
					tag = GFS
					tag = ZLU
					tag = ZOO
				}
			}
			add_to_ROOT_potential_cores = yes
		}
		custom_effect_tooltip = KIR_line_break
		if = {
			limit = {
				all_controlled_state = {
					NOT = {
						is_core_of = ROA
						is_core_of = TSV
						is_core_of = GFS
						is_core_of = ZLU
						is_core_of = ZOO
					}
				}
			}
			effect_tooltip = { add_dynamic_modifier = { modifier = BAC_autonomy_state } }
		}
		every_controlled_state = {
			limit = {
				OR = {
					is_core_of = ROA
					is_core_of = TSV
					is_core_of = GFS
					is_core_of = ZLU
					is_core_of = ZOO
				}
			}
			add_dynamic_modifier = { modifier = BAC_autonomy_state }
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = communism
			popularity = 0.03
		}
		bac_WPU_medium_effect = yes
	}
}

shared_focus = {
	id = BAC_COC_convert_barbarian
	icon = GFX_goal_solar_cult
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_war_barbarian
	x = -1
	y = 1
	allow_branch = {
		has_country_flag = COC_war_committee_flag
	}
	mutually_exclusive = {
		focus = BAC_COC_friend_barbarian
	}
	prerequisite = {
		focus = BAC_COC_war_barbarian
		focus = BAC_COC_m1
	}
	available = {
		# all_other_country = {
		# 	OR = {
		# 		tag = ROA
		# 		tag = TSV
		# 		tag = GFS
		# 		tag = ZLU
		# 		tag = ZOO
		# 	}
		# 	bac_all_original_cores_controlled_by_ROOT_or_ally = yes
		# }
		ROA = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		TSV = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		GFS = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		ZLU = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		ZOO = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_convert_barbarian"
		set_country_flag = commonalty_solved_barbarian
		add_political_power = -300
		add_stability = -0.49
		every_possible_country = {
			limit = {
				OR = {
					tag = ROA
					tag = TSV
					tag = GFS
					tag = ZLU
					tag = ZOO
				}
			}
			add_to_ROOT_potential_cores = yes
		}
		custom_effect_tooltip = KIR_line_break
		bac_eqs_popularity = yes
		bac_COT_medium_effect = yes
	}
}
shared_focus = {
	id = BAC_COC_friend_deer
	icon = GFX_goal_KIR_deer
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_war_deer
	x = 1
	y = 1
	allow_branch = {
		has_country_flag = COC_war_committee_flag
	}
	mutually_exclusive = {
		focus = BAC_COC_convert_deer
	}
	prerequisite = {
		focus = BAC_COC_war_deer
		focus = BAC_COC_m1
	}
	available = {
		# all_other_country = {
		# 	OR = {
		# 		tag = BRS
		# 		tag = SAM
		# 		tag = HIN
		# 		tag = CTL
		# 	}
		# 	bac_all_original_cores_controlled_by_ROOT_or_ally = yes
		# }
		BRS = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		SAM = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		HIN = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		CTL = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_friend_deer"
		set_country_flag = commonalty_solved_deer
		if = {
			limit = {
				country_exists = event_target:BAC_hindian_ally
			}
			if = {
				limit = { event_target:BAC_hindian_ally = { is_subject = yes } }
				event_target:BAC_hindian_ally = {
					add_autonomy_score = {
						value = -303
						localization = BAC_COC_friend_deer
					}
				}
			}
			else = {
				random_list = {
					3 = {
						add_political_power = -99
						remove_from_faction = event_target:BAC_hindian_ally
						#ROOT = {
							#hidden_effect = {
								create_wargoal = {
									type = annex_everything
									target = event_target:BAC_hindian_ally
								}
							#}
							#custom_effect_tooltip = KIR_republic_postwar_focus_XY_WG_tt
						#}
					}
					7 = {
						modifier = {
							factor = 1.25
							has_tech = tech_kirin_astrology
						}
						set_autonomy = {
							target = PREV
							autonomous_state = autonomy_dominion
							end_wars = no
							end_civil_wars = no
						}
					}
				}
			}
		}
		else = {
			add_political_power = -99
			effect_tooltip = {
				every_other_country = {
					limit = {
						OR = {
							tag = BRS
							tag = SAM
							tag = HIN
							tag = CTL
						}
					}
					ROOT = {
						set_autonomy = {
							target = PREV
							autonomous_state = autonomy_dominion
							end_wars = no
							end_civil_wars = no
						}
					}
				}
			}
		}
		if = {
			limit = {
				all_controlled_state = {
					NOT = {
						is_core_of = BRS
						is_core_of = SAM
						is_core_of = HIN
						is_core_of = CTL
					}
				}
			}
			effect_tooltip = { add_dynamic_modifier = { modifier = BAC_autonomy_state } }
		}
		every_controlled_state = {
			limit = {
				OR = {
					is_core_of = BRS
					is_core_of = SAM
					is_core_of = HIN
					is_core_of = CTL
				}
			}
			add_dynamic_modifier = { modifier = BAC_autonomy_state }
		}
		custom_effect_tooltip = KIR_line_break
		every_possible_country = {
			limit = {
				OR = {
					tag = BRS
					tag = SAM
					tag = HIN
					tag = CTL
				}
			}
			add_to_ROOT_potential_cores = yes
		}
		custom_effect_tooltip = KIR_line_break
		add_popularity = {
			ideology = communism
			popularity = 0.03
		}
		bac_WPU_medium_effect = yes
	}
}

shared_focus = { #convert deer
	id = BAC_COC_convert_deer
	icon = GFX_goal_CTL_A_deerm
	cost = 7
	ai_will_do = { factor = 80 }
	relative_position_id = BAC_COC_war_deer
	x = -1
	y = 1
	allow_branch = {
		has_country_flag = COC_war_committee_flag
	}
	mutually_exclusive = {
		focus = BAC_COC_friend_deer
	}
	prerequisite = {
		focus = BAC_COC_war_deer
		focus = BAC_COC_m1
	}
	available = {
		# all_other_country = {
		# 	OR = {
		# 		tag = BRS
		# 		tag = SAM
		# 		tag = HIN
		# 		tag = CTL
		# 	}
		# 	bac_all_original_cores_controlled_by_ROOT_or_ally = yes
		# }
		BRS = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		SAM = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		HIN = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
		CTL = { bac_all_original_cores_controlled_by_ROOT_or_ally = yes }
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus BAC_COC_convert_deer"
		set_country_flag = commonalty_solved_deer
		add_political_power = -300
		add_stability = -0.49
		if = {
			limit = {
				country_exists = event_target:BAC_hindian_ally
			}
			random_list = {
				7 = {
					modifier = {
						factor = 0.75
						has_tech = tech_kirin_astrology
					}
					if = {
						limit = { event_target:BAC_hindian_ally = { is_subject = yes } }
						end_puppet = event_target:BAC_hindian_ally
					}
					remove_from_faction = event_target:BAC_hindian_ally
					ROOT = {
						#hidden_effect = {
							create_wargoal = {
								type = annex_everything
								target = event_target:BAC_hindian_ally
							}
						#}
						#custom_effect_tooltip = KIR_republic_postwar_focus_XY_WG_tt
					}
				}
				3 = {
					modifier = {
						factor = 1.25
						has_tech = tech_kirin_astrology
					}
					ROOT = {
						#hidden_effect = {
							annex_country = {
								transfer_troops = yes
								target = CTL
							}
						#}
						#custom_effect_tooltip = KIR_republic_postwar_focus_XY_WG_tt
					}
				}
			}
		}
		else = {
			effect_tooltip = {
				every_other_country = {
					limit = {
						OR = {
							tag = BRS
							tag = SAM
							tag = HIN
							tag = CTL
						}
					}
					ROOT = {
						annex_country = {
							target = PREV
						}
					}
				}
			}
		}
		custom_effect_tooltip = KIR_line_break
		every_possible_country = {
			limit = {
				OR = {
					tag = BRS
					tag = SAM
					tag = HIN
					tag = CTL
				}
			}
			add_to_ROOT_potential_cores = yes
		}
		custom_effect_tooltip = KIR_line_break
		bac_eqs_popularity = yes
		bac_COT_medium_effect = yes
	}
}