
#Scope is triggered unit leader
COC_Champion_add_WarHero_trait = {
    ROOT = { 
		if = {
			limit = { NOT = { has_trait = war_hero } }
			if = {
				limit = {
					OR = {
						has_trait = media_personality
						has_trait = navy_media_personality
					}
				}
				add_unit_leader_trait = war_hero
			}
			else = {
				if = {
					limit = { is_army_leader = yes }
					add_unit_leader_trait = media_personality
				}
				else_if = {
					limit = { is_navy_leader = yes }
					add_unit_leader_trait = navy_media_personality
				}
			}
		}
		else_if = {
			limit = { 
				NOT = { EQS = { has_country_flag = assigned_War_Hero_general } }
				is_army_leader = yes
				is_hired_as_advisor = yes
			}
			if = {
				limit = { is_character_slot = political_advisor }
				add_trait = {
					slot = political_advisor
					trait = war_hero_general
				}
			}
			else_if = { 
				limit = { is_character_slot = high_command }
				add_trait = {
					slot = high_command
					trait = war_hero_general
				}
			}
			else_if = { 
				limit = { is_character_slot = army_chief }
				add_trait = {
					slot = army_chief
					trait = war_hero_general
				}
			}
			else_if = { 
				limit = { is_character_slot = theorist }
				add_trait = {
					slot = theorist
					trait = war_hero_general
				}
			}
			else = {
				add_trait = {
					slot = air_chief
					trait = war_hero_general
				}
			}
			EQS = { set_country_flag = assigned_War_Hero_general }
		}
		else_if = {
			limit = { 
				NOT = { EQS = { has_country_flag = assigned_grand_admiral } }
				is_navy_leader = yes
				is_advisor = yes
			}
			if = {
				limit = { is_character_slot = high_command } #order is important.
				add_trait = {
					slot = high_command
					trait = grand_admiral
				}
			}
			else_if = { 
				limit = { is_character_slot = navy_chief }
				add_trait = {
					slot = navy_chief
					trait = grand_admiral
				}
			}
			else_if = { 
				limit = { is_character_slot = political_advisor }
				add_trait = {
					slot = political_advisor
					trait = grand_admiral
				}
			}
			else_if = { 
				limit = { is_character_slot = theorist }
				add_trait = {
					slot = theorist
					trait = grand_admiral
				}
			}
			EQS = { set_country_flag = assigned_grand_admiral }
		}
		else_if = {
			limit = { has_trait = war_hero_general }
			if = {
				limit = { is_character_slot = political_advisor }
				add_trait = {
					slot = political_advisor
					trait = war_hero_grunt
				}
			}
			else_if = { 
				limit = { is_character_slot = high_command }
				add_trait = {
					slot = high_command
					trait = war_hero_grunt
				}
			}
			else_if = { 
				limit = { is_character_slot = army_chief }
				add_trait = {
					slot = army_chief
					trait = war_hero_grunt
				}
			}
			else_if = { 
				limit = { is_character_slot = theorist }
				add_trait = {
					slot = theorist
					trait = war_hero_grunt
				}
			}
			else = {
				add_trait = {
					slot = air_chief
					trait = war_hero_grunt
				}
			}
		}
		else = { add_political_power = 5 }
	}
}

TNO_BAC_Country_Closing_Screen_Show = {
	set_country_flag = TNO_BAC_Country_Closing_Screen_Visible
	set_variable = { CountryClosing_dirty = 0 }
	add_to_array = { CountryClosing_array_buttons = 2 }
	add_to_array = { CountryClosing_array_buttons = 1 }
}

TNO_BAC_Country_Closing_Screen_CreditsPages_Show = { # Add another "add_to_array = { CountryClosing_array_credits_pages = 1 }" in case you need another page of members
	clear_array = CountryClosing_array_credits_pages
	add_to_array = { CountryClosing_array_credits_pages = 2 }
	add_to_array = { CountryClosing_array_credits_pages = 1 }
}

TNO_BAC_Country_Closing_Screen_CreditsPages_Hide = {
	clear_array = CountryClosing_array_credits_pages
}

add_to_coalition = {
	if = {
		limit = {
			NOT = {
				check_variable = { political_power_ideology = coalition_partner_var }
				is_in_array = { coalition_partners = coalition_partner_var }
			}
		}
		custom_effect_tooltip = add_to_coalition
		if = {
			limit = {
				NOT = {
					has_government = var:coalition_partner_var
				}
			}
			set_variable = { is_in_coalition_with_@var:coalition_partner_var = 1 }
			add_to_array = { coalition_partners = coalition_partner_var }
		}
	}
}
